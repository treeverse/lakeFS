(this["webpackJsonplakefs-ui"]=this["webpackJsonplakefs-ui"]||[]).push([[0],{117:function(e,t,r){},127:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(38),s=r.n(a),i=r(31),o=r(23),u=(r(116),r(117),r(3)),j=r.n(u),l=r(9),d=r(5),b=r(13),h=r(20),x=r(17),O=r(15),p=r(94),f=r(109),m=r(11),v=r(14),g=r(10),y=r(27),k=r.n(y),w=r(75),C=r(29),I=r(69),S=r(30),P=r(16),N=r(93),F=r(95),_=r(96),E=r(35),T=r(44),A="/api/v1",R=100,D=new(function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"get",value:function(e){var t=localStorage.getItem(e);return null!==t?JSON.parse(t):null}},{key:"set",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"delete",value:function(e){localStorage.removeItem(e)}}]),e}()),q=function(e){return JSON.stringify(e,null,"")},H=function(e){var t=Object.keys(e).map((function(t){return[t,e[t]]}));return new URLSearchParams(t).toString()},U=function(){var e=Object(l.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/json"!==t.headers.get("Content-Type")){e.next=7;break}return e.next=3,t.json();case 3:n=e.sent,r=n.message,e.next=10;break;case 7:return e.next=9,t.text();case 9:r=e.sent;case 10:return e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G={Accept:"application/json","Content-Type":"application/json"},B="error authenticating request",z=function(){var e=Object(l.a)(j.a.mark((function e(t){var r,n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=s.length>2&&void 0!==s[2]?s[2]:{},c=new Headers(Object(P.a)(Object(P.a)({},G),n)),e.next=5,fetch("".concat(A).concat(t),Object(P.a)({headers:c},r));case 5:if(401!==(a=e.sent).status){e.next=13;break}return e.next=9,U(a);case 9:if(e.sent!==B){e.next=13;break}throw D.delete("user"),new V("Authentication Error");case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){Object(N.a)(r,e);var t=Object(F.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).name="NotFoundError",n}return r}(Object(_.a)(Error)),V=function(e){Object(N.a)(r,e);var t=Object(F.a)(r);function r(e){var n;return Object(E.a)(this,r),(n=t.call(this,e)).name="AuthenticationError",n}return r}(Object(_.a)(Error)),M=function(e){Object(N.a)(r,e);var t=Object(F.a)(r);function r(e,n){var c;return Object(E.a)(this,r),(c=t.call(this,e)).name="MergeError",c.payload=n,c}return r}(Object(_.a)(Error)),K=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"login",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/auth/login"),{headers:new Headers(G),method:"POST",body:q({access_key_id:t,secret_access_key:r})});case 2:if(401!==(n=e.sent).status){e.next=5;break}throw new V("invalid credentials");case 5:if(200===n.status){e.next=7;break}throw new V("unknown authentication error");case 7:return e.next=9,z("/user");case 9:return c=e.sent,e.next=12,c.json();case 12:return a=e.sent,s=a.user,D.set("user",Object(P.a)(Object(P.a)({},s),{},{accessKeyId:t})),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(A,"/auth/logout"),{headers:new Headers(G),method:"POST"});case 2:if(200===e.sent.status){e.next=5;break}throw new Error("unknown authentication error");case 5:D.delete("user");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.get("user"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"listUsers",value:function(){var e=Object(l.a)(j.a.mark((function e(){var t,r,n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",r=s.length>1&&void 0!==s[1]?s[1]:"",n=s.length>2&&void 0!==s[2]?s[2]:R,c=H({prefix:t,after:r,amount:n}),e.next=6,z("/auth/users?".concat(c));case 6:if(200===(a=e.sent).status){e.next=15;break}return e.t0=Error,e.t1="could not list users: ",e.next=12,U(a);case 12:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 15:return e.abrupt("return",a.json());case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createUser",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/users",{method:"POST",body:q({id:t})});case 2:if(201===(r=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(r);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:return e.abrupt("return",r.json());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"listGroups",value:function(){var e=Object(l.a)(j.a.mark((function e(){var t,r,n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",r=s.length>1&&void 0!==s[1]?s[1]:"",n=s.length>2&&void 0!==s[2]?s[2]:R,c=H({prefix:t,after:r,amount:n}),e.next=6,z("/auth/groups?".concat(c));case 6:if(200===(a=e.sent).status){e.next=15;break}return e.t0=Error,e.t1="could not list groups: ",e.next=12,U(a);case 12:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 15:return e.abrupt("return",a.json());case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"listGroupMembers",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:R,c=H({after:r,amount:n}),e.next=4,z("/auth/groups/".concat(t,"/members?").concat(c));case 4:if(200===(a=e.sent).status){e.next=13;break}return e.t0=Error,e.t1="could not list group members: ",e.next=10,U(a);case 10:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 13:return e.abrupt("return",a.json());case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"addUserToGroup",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/groups/".concat(r,"/members/").concat(t),{method:"PUT"});case 2:if(201===(n=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(n);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"removeUserFromGroup",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/groups/".concat(r,"/members/").concat(t),{method:"DELETE"});case 2:if(204===(n=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(n);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"attachPolicyToUser",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/users/".concat(t,"/policies/").concat(r),{method:"PUT"});case 2:if(201===(n=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(n);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"detachPolicyFromUser",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/users/".concat(t,"/policies/").concat(r),{method:"DELETE"});case 2:if(204===(n=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(n);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"attachPolicyToGroup",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/groups/".concat(t,"/policies/").concat(r),{method:"PUT"});case 2:if(201===(n=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(n);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"detachPolicyFromGroup",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/groups/".concat(t,"/policies/").concat(r),{method:"DELETE"});case 2:if(204===(n=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(n);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteCredentials",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/users/".concat(t,"/credentials/").concat(r),{method:"DELETE"});case 2:if(204===(n=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(n);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createGroup",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/groups",{method:"POST",body:q({id:t})});case 2:if(201===(r=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(r);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:return e.abrupt("return",r.json());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"listPolicies",value:function(){var e=Object(l.a)(j.a.mark((function e(){var t,r,n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",r=s.length>1&&void 0!==s[1]?s[1]:"",n=s.length>2&&void 0!==s[2]?s[2]:R,c=H({prefix:t,after:r,amount:n}),e.next=6,z("/auth/policies?".concat(c));case 6:if(200===(a=e.sent).status){e.next=15;break}return e.t0=Error,e.t1="could not list policies: ",e.next=12,U(a);case 12:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 15:return e.abrupt("return",a.json());case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createPolicy",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(P.a)({id:t},JSON.parse(r)),e.next=3,z("/auth/policies",{method:"POST",body:q(n)});case 3:if(201===(c=e.sent).status){e.next=10;break}return e.t0=Error,e.next=8,U(c);case 8:throw e.t1=e.sent,new e.t0(e.t1);case 10:return e.abrupt("return",c.json());case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"editPolicy",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(P.a)({id:t},JSON.parse(r)),e.next=3,z("/auth/policies/".concat(t),{method:"PUT",body:q(n)});case 3:if(200===(c=e.sent).status){e.next=10;break}return e.t0=Error,e.next=8,U(c);case 8:throw e.t1=e.sent,new e.t0(e.t1);case 10:return e.abrupt("return",c.json());case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"listCredentials",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:R,c=H({after:r,amount:n}),e.next=4,z("/auth/users/".concat(t,"/credentials?").concat(c));case 4:if(200===(a=e.sent).status){e.next=13;break}return e.t0=Error,e.t1="could not list credentials: ",e.next=10,U(a);case 10:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 13:return e.abrupt("return",a.json());case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createCredentials",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/users/".concat(t,"/credentials"),{method:"POST"});case 2:if(201===(r=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(r);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:return e.abrupt("return",r.json());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"listUserGroups",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:R,c=H({after:r,amount:n}),e.next=4,z("/auth/users/".concat(t,"/groups?").concat(c));case 4:if(200===(a=e.sent).status){e.next=13;break}return e.t0=Error,e.t1="could not list user groups: ",e.next=10,U(a);case 10:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 13:return e.abrupt("return",a.json());case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"listUserPolicies",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r,n,c,a,s,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]&&i[1],n=i.length>2&&void 0!==i[2]?i[2]:"",c=i.length>3&&void 0!==i[3]?i[3]:R,a={after:n,amount:c},r&&(a.effective="true"),e.next=7,z("/auth/users/".concat(t,"/policies?").concat(H(a)));case 7:if(200===(s=e.sent).status){e.next=16;break}return e.t0=Error,e.t1="could not list policies: ",e.next=13,U(s);case 13:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 16:return e.abrupt("return",s.json());case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPolicy",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/policies/".concat(t));case 2:if(200===(r=e.sent).status){e.next=11;break}return e.t0=Error,e.t1="could not get policy: ",e.next=8,U(r);case 8:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 11:return e.abrupt("return",r.json());case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"listGroupPolicies",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:R,c={after:r,amount:n},e.next=4,z("/auth/groups/".concat(t,"/policies?").concat(H(c)));case 4:if(200===(a=e.sent).status){e.next=13;break}return e.t0=Error,e.t1="could not list policies: ",e.next=10,U(a);case 10:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 13:return e.abrupt("return",a.json());case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"deleteUser",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/users/".concat(t),{method:"DELETE"});case 2:if(204===(r=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(r);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteUsers",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=8;break}return n=t[r],e.next=5,this.deleteUser(n);case 5:r++,e.next=1;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteGroup",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/groups/".concat(t),{method:"DELETE"});case 2:if(204===(r=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(r);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteGroups",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=8;break}return n=t[r],e.next=5,this.deleteGroup(n);case 5:r++,e.next=1;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deletePolicy",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/auth/policies/".concat(t),{method:"DELETE"});case 2:if(204===(r=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(r);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deletePolicies",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=8;break}return n=t[r],e.next=5,this.deletePolicy(n);case 5:r++,e.next=1;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Y=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"get",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(encodeURIComponent(t)));case 2:if(404!==(r=e.sent).status){e.next=7;break}throw new L("could not find repository ".concat(t));case 7:if(200===r.status){e.next=15;break}return e.t0=Error,e.t1="could not get repository: ",e.next=12,U(r);case 12:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 15:return e.abrupt("return",r.json());case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=Object(l.a)(j.a.mark((function e(){var t,r,n,c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",r=s.length>1&&void 0!==s[1]?s[1]:"",n=s.length>2&&void 0!==s[2]?s[2]:R,c=H({prefix:t,after:r,amount:n}),e.next=6,z("/repositories?".concat(c));case 6:if(200===(a=e.sent).status){e.next=15;break}return e.t0=Error,e.t1="could not list repositories: ",e.next=12,U(a);case 12:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 15:return e.next=17,a.json();case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories",{method:"POST",body:q(t)});case 2:if(201===(r=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(r);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:return e.abrupt("return",r.json());case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t),{method:"DELETE"});case 2:if(204===(r=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(r);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),J=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"get",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t,"/branches/").concat(r));case 2:if(404!==(n=e.sent).status){e.next=7;break}throw new L("could not find branch ".concat(r));case 7:if(200===n.status){e.next=15;break}return e.t0=Error,e.t1="could not get branch: ",e.next=12,U(n);case 12:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 15:return e.abrupt("return",n.json());case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t,"/branches"),{method:"POST",body:q({name:r,source:n})});case 2:if(201===(c=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(c);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:return e.abrupt("return",c.json());case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t,"/branches/").concat(r),{method:"DELETE"});case 2:if(204===(n=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(n);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"revert",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t,"/branches/").concat(r),{method:"PUT",body:q(n)});case 2:if(204===(c=e.sent).status){e.next=9;break}return e.t0=Error,e.next=7,U(c);case 7:throw e.t1=e.sent,new e.t0(e.t1);case 9:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"list",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r,n,c,a,s,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:"",n=i.length>2&&void 0!==i[2]?i[2]:"",c=i.length>3&&void 0!==i[3]?i[3]:R,a=H({prefix:r,after:n,amount:c}),e.next=6,z("/repositories/".concat(t,"/branches?").concat(a));case 6:if(200===(s=e.sent).status){e.next=15;break}return e.t0=Error,e.t1="could not list branches: ",e.next=12,U(s);case 12:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 15:return e.abrupt("return",s.json());case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),W=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"list",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n){var c,a,s,i,o,u=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=u.length>3&&void 0!==u[3]?u[3]:"",a=u.length>4&&void 0!==u[4]?u[4]:R,s=!(u.length>5&&void 0!==u[5])||u[5],i=H({prefix:n,amount:a,after:c,readUncommitted:s}),e.next=6,z("/repositories/".concat(t,"/refs/").concat(r,"/objects/ls?").concat(i));case 6:if(200===(o=e.sent).status){e.next=13;break}return e.t0=Error,e.next=11,U(o);case 11:throw e.t1=e.sent,new e.t0(e.t1);case 13:return e.next=15,o.json();case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n,c){var a,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("content",c),window.data=a,s=H({path:n}),e.next=6,z("/repositories/".concat(t,"/branches/").concat(r,"/objects?").concat(s),{method:"POST",body:a,headers:new Headers({Accept:"application/json"})});case 6:if(201===(i=e.sent).status){e.next=13;break}return e.t0=Error,e.next=11,U(i);case 11:throw e.t1=e.sent,new e.t0(e.t1);case 13:return e.abrupt("return",i.json());case 14:case"end":return e.stop()}}),e)})));return function(t,r,n,c){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=H({path:n}),e.next=3,z("/repositories/".concat(t,"/branches/").concat(r,"/objects?").concat(c),{method:"DELETE"});case 3:if(204===(a=e.sent).status){e.next=10;break}return e.t0=Error,e.next=8,U(a);case 8:throw e.t1=e.sent,new e.t0(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),$=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"log",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c,a,s,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:"",c=i.length>3&&void 0!==i[3]?i[3]:R,a=H({after:n,amount:c}),e.next=5,z("/repositories/".concat(t,"/refs/").concat(r,"/commits?").concat(a));case 5:if(200===(s=e.sent).status){e.next=12;break}return e.t0=Error,e.next=10,U(s);case 10:throw e.t1=e.sent,new e.t0(e.t1);case 12:return e.abrupt("return",s.json());case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t,"/commits/").concat(r));case 2:if(404!==(n=e.sent).status){e.next=7;break}throw new L("could not find commit ".concat(r));case 7:if(200===n.status){e.next=15;break}return e.t0=Error,e.t1="could not get commit: ",e.next=12,U(n);case 12:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 15:return e.abrupt("return",n.json());case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"commit",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n){var c,a,s=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=s.length>3&&void 0!==s[3]?s[3]:{},e.next=3,z("/repositories/".concat(t,"/branches/").concat(r,"/commits"),{method:"POST",body:q({message:n,metadata:c})});case 3:if(201===(a=e.sent).status){e.next=10;break}return e.t0=Error,e.next=8,U(a);case 8:throw e.t1=e.sent,new e.t0(e.t1);case 10:return e.abrupt("return",a.json());case 11:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),Q=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"changes",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n){var c,a,s,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i.length>3&&void 0!==i[3]?i[3]:R,a=H({after:n,amount:c}),e.next=4,z("/repositories/".concat(t,"/branches/").concat(r,"/diff?").concat(a));case 4:if(200===(s=e.sent).status){e.next=11;break}return e.t0=Error,e.next=9,U(s);case 9:throw e.t1=e.sent,new e.t0(e.t1);case 11:return e.abrupt("return",s.json());case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"diff",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n,c){var a,s,i,o=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:R,s=H({after:c,amount:a}),e.next=4,z("/repositories/".concat(t,"/refs/").concat(r,"/diff/").concat(n,"?").concat(s));case 4:if(200===(i=e.sent).status){e.next=11;break}return e.t0=Error,e.next=9,U(i);case 9:throw e.t1=e.sent,new e.t0(e.t1);case 11:return e.abrupt("return",i.json());case 12:case"end":return e.stop()}}),e)})));return function(t,r,n,c){return e.apply(this,arguments)}}()},{key:"merge",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n){var c,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t,"/refs/").concat(r,"/merge/").concat(n),{method:"POST",body:"{}"});case 2:c=e.sent,e.t0=c.status,e.next=200===e.t0?6:409===e.t0?7:(e.t0,11);break;case 6:return e.abrupt("return",c.json());case 7:return e.next=9,c.json();case 9:throw a=e.sent,new M(c.statusText,a.body);case 11:return e.t1=Error,e.next=14,U(c);case 14:throw e.t2=e.sent,new e.t1(e.t2);case 16:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),X=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"listRuns",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r,n,c,a,s,i,o=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:"",n=o.length>2&&void 0!==o[2]?o[2]:"",c=o.length>3&&void 0!==o[3]?o[3]:"",a=o.length>4&&void 0!==o[4]?o[4]:R,s=H({branch:r,commit:n,after:c,amount:a}),e.next=7,z("/repositories/".concat(t,"/actions/runs?").concat(s));case 7:if(200===(i=e.sent).status){e.next=16;break}return e.t0=Error,e.t1="could not list actions runs: ",e.next=13,U(i);case 13:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 16:return e.abrupt("return",i.json());case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRun",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t,"/actions/runs/").concat(r));case 2:if(200===(n=e.sent).status){e.next=11;break}return e.t0=Error,e.t1="could not get actions run: ",e.next=8,U(n);case 8:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 11:return e.abrupt("return",n.json());case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"listRunHooks",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c,a,s,i=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:"",c=i.length>3&&void 0!==i[3]?i[3]:R,a=H({after:n,amount:c}),e.next=5,z("/repositories/".concat(t,"/actions/runs/").concat(r,"/hooks?").concat(a));case 5:if(200===(s=e.sent).status){e.next=14;break}return e.t0=Error,e.t1="could not list actions run hooks: ",e.next=11,U(s);case 11:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 14:return e.abrupt("return",s.json());case 15:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getRunHookOutput",value:function(){var e=Object(l.a)(j.a.mark((function e(t,r,n){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/repositories/".concat(t,"/actions/runs/").concat(r,"/hooks/").concat(n,"/output"),{headers:{"Content-Type":"application/octet-stream"}});case 2:if(200===(c=e.sent).status){e.next=11;break}return e.t0=Error,e.t1="could not get actions run hook output: ",e.next=8,U(c);case 8:throw e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),new e.t0(e.t3);case 11:return e.abrupt("return",c.text());case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}(),Z=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"lakeFS",value:function(){var e=Object(l.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/setup_lakefs",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t})});case 2:r=e.sent,e.t0=r.status,e.next=200===e.t0?6:409===e.t0?7:8;break;case 6:return e.abrupt("return",r.json());case 7:throw new Error("Conflict");case 8:throw new Error("Unknown");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ee=function(){function e(){Object(E.a)(this,e)}return Object(T.a)(e,[{key:"get",value:function(){var e=Object(l.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z("/config",{method:"GET"});case 2:t=e.sent,e.t0=t.status,e.next=200===e.t0?6:409===e.t0?9:10;break;case 6:return e.next=8,t.json();case 8:return e.abrupt("return",e.sent);case 9:throw new Error("Conflict");case 10:throw new Error("Unknown");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),te=new Y,re=new J,ne=new W,ce=new $,ae=new Q,se=new Z,ie=new K,oe=new X,ue=new ee,je=r(105),le=function(e){if("string"===typeof e)return e;var t=Object(o.f)(e.pathname,e.params?e.params:{});if(!e.query)return t;var r=new URLSearchParams(e.query).toString();return"".concat(t,"?").concat(r)},de=function(){var e=Object(o.i)(),t=Object(o.h)();return{query:function(){var e,t=Object(o.i)(),r={},n=Object(je.a)(new URLSearchParams(t.search).entries());try{for(n.s();!(e=n.n()).done;){var c=Object(d.a)(e.value,2),a=c[0],s=c[1];r[a]=s}}catch(i){n.e(i)}finally{n.f()}return r}(),params:Object(o.j)(),route:e.pathname,push:function(e){return t.push(le(e))}}},be={loading:!0,error:null,nextPage:null,results:[]},he=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(n.useState)(be),c=Object(d.a)(r,2),a=c[0],s=c[1],i=Oe((function(){return s(Object(P.a)({},be)),e()}),[].concat(Object(S.a)(t),[be])),o=i.response,u=i.error,j=i.loading;return Object(n.useEffect)((function(){s(j?{results:[],loading:!0}:!u&&o?{error:null,nextPage:o.pagination&&o.pagination.has_more?o.pagination.next_offset:null,loading:!1,results:o.results}:{error:u,loading:!1})}),[o,j,u]),a},xe={loading:!0,error:null,response:null},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=de(),c=Object(n.useState)(xe),a=Object(d.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(!1),u=Object(d.a)(o,2),b=u[0],h=u[1];return Object(n.useEffect)((function(){b&&(r.push({pathname:"/auth/login",query:{next:r.route}}),h(!1))}),[b,r]),Object(n.useEffect)((function(){(function(){var t=Object(l.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(xe),t.prev=1,t.next=4,e();case 4:r=t.sent,i({loading:!1,error:null,response:r}),t.next=14;break;case 8:if(t.prev=8,t.t0=t.catch(1),!(t.t0 instanceof V)){t.next=13;break}return h(!0),t.abrupt("return");case 13:i({loading:!1,error:t.t0,response:null});case 14:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(){return t.apply(this,arguments)}})()()}),t),Object(P.a)({},s)},pe=function(){var e=Oe((function(){return ie.getCurrentUser()}),[]);return{user:e.response,loading:e.loading,error:e.error}},fe=r(110),me=r(0);var ve=function(e){var t,r=["href","to","children","components"],n={to:e.href?le(e.href):e.href};return Object.getOwnPropertyNames(e).filter((function(e){return-1===r.indexOf(e)})).forEach((function(t){return n[t]=e[t]})),e.component&&(n.component=(t=e.component,c.a.forwardRef((function(e,r){var n=e.navigate,a=e.onClick,s=Object(fe.a)(e,["navigate","onClick"]),i=s.target,o=Object(P.a)(Object(P.a)({},s),{},{ref:r,onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||i&&"_self"!==i||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),n())}});return c.a.createElement(t,o)})))),c.a.createElement(i.b,n,e.children)},ge=function(e){var t=e.href,r=e.active,n=e.children;return Object(me.jsx)(C.a.Item,{children:Object(me.jsx)(ve,{href:t,component:C.a.Link,active:r,children:Object(me.jsx)(me.Fragment,{children:n})})})},ye=function(){var e=de(),t=pe(),r=t.user,n=t.loading,c=t.error;return n?Object(me.jsx)(w.a.Text,{children:"Loading..."}):!r||c?Object(me.jsx)(me.Fragment,{}):Object(me.jsx)(w.a.Collapse,{className:"justify-content-end",children:Object(me.jsxs)(I.a,{title:r.id,className:"navbar-username",alignRight:!0,children:[Object(me.jsxs)(I.a.Header,{children:["Access Key ID: ",Object(me.jsx)("code",{children:r.accessKeyId})]}),Object(me.jsx)(I.a.Divider,{}),Object(me.jsx)(I.a.Item,{href:"/auth/credentials",onSelect:function(){return e.push("/auth/credentials")},children:"Manage My Credentials"}),Object(me.jsx)(I.a.Item,{onSelect:function(){ie.logout().then((function(){e.push("/auth/login")}))},children:"Logout"})]})})},ke=function(e){var t,r=e.href,n=e.children,c=de();return Object(me.jsx)(ve,{component:C.a.Link,active:(t=r,0===c.route.indexOf(t)),href:r,children:n})},we=function(){return Object(me.jsxs)(w.a,{variant:"dark",bg:"dark",expand:"md",children:[Object(me.jsx)(ve,{component:w.a.Brand,href:"/",children:Object(me.jsx)("img",{src:"/logo.png",alt:"lakeFS",className:"logo"})}),Object(me.jsxs)(C.a,{className:"mr-auto",children:[Object(me.jsx)(ke,{href:"/repositories",children:"Repositories"}),Object(me.jsx)(ke,{href:"/auth",children:"Administration"})]}),Object(me.jsx)(ye,{})]})},Ce=function(e){var t=e.children;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(we,{}),Object(me.jsx)("div",{className:"main-app",children:t})]})},Ie=r(21),Se=r(26),Pe=r(67),Ne=r(22),Fe=r(111);function _e(e,t,r){var n;return function(){var c=this,a=arguments,s=function(){n=null,r||e.apply(c,a)},i=r&&!n;clearTimeout(n),n=setTimeout(s,t),i&&e.apply(c,a)}}var Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=Object(n.useRef)(_e(e,t));return r.current},Te=c.a.forwardRef((function(e,t){var r=_e(e.onChange,void 0!==e.debounce?e.debounce:300);return Object(me.jsx)(b.a.Control,Object(P.a)({ref:t},Object(P.a)(Object(P.a)({},e),{},{onChange:r})))})),Ae=function(){return Object(me.jsx)(Ie.a,{variant:"info",children:"Loading..."})},Re=function(){return Object(me.jsx)("span",{children:"\u2014"})},De=function(e){for(var t=e.error,r=e.onDismiss,n=void 0===r?null:r,c=e.className,a=void 0===c?null:c,s=t.toString(),i=t;i.error;)i=i.error;return i.message&&(s=i.message),null!==n?Object(me.jsx)(Ie.a,{className:a,variant:"danger",dismissible:!0,onClose:n,children:s}):Object(me.jsx)(Ie.a,{className:a,variant:"danger",children:s})},qe=function(e){var t=e.dateValue,r=e.format,n=void 0===r?"MM/DD/YYYY HH:mm:ss":r;return"number"===typeof t?Object(me.jsx)("span",{children:k.a.unix(t).format(n)}):Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{children:t}),children:Object(me.jsx)("span",{children:k()(t).format(n)})})},He=function(e){var t=e.children,r=e.orientation,n=void 0===r?"left":r;return Object(me.jsx)("div",{role:"toolbar",className:"float-".concat(n," mb-2 btn-toolbar"),children:t})},Ue=function(e){var t=e.children;return Object(me.jsx)("div",{className:"action-bar clearfix",children:t})},Ge=function(e){var t=e.href,r=e.children,n=e.buttonVariant,c=e.tooltip,a=void 0===c?null:c;return null===a?Object(me.jsx)(ve,{href:t,component:m.a,variant:n,children:r}):Object(me.jsx)(ve,{href:t,component:Be,tooltip:a,variant:n,children:r})},Be=function(e){var t=e.onClick,r=e.variant,n=e.children,c=e.tooltip,a=e.className,s=void 0===a?"":a,i=e.size,o=void 0===i?"sm":i;return Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{children:c}),children:Object(me.jsx)(m.a,{variant:r,onClick:t,className:s,size:o,children:n})})},ze=function(e){var t=e.text,r=e.variant,c=e.onSuccess,a=e.icon,s=void 0===a?Object(me.jsx)(g.i,{}):a,i=e.onError,o=e.tooltip,u=void 0===o?"Copy to clipboard":o,j=Object(n.useState)(!1),l=Object(d.a)(j,2),b=l[0],h=l[1],x=Object(n.useState)(!1),O=Object(d.a)(x,2),p=O[0],f=O[1],v=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),r=t[0],c=t[1],a=Object(n.useRef)(null),s=function(){return c(!0)},i=function(){return c(!1)};return Object(n.useEffect)((function(){var e=a.current;if(e)return e.addEventListener("mouseover",s),e.addEventListener("mouseout",i),function(){e.removeEventListener("mouseover",s),e.removeEventListener("mouseout",i)}}),[a]),[a,r]}(),y=Object(d.a)(v,2),k=y[0],w=y[1],C=p?Object(me.jsx)(g.d,{}):s,I=null;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Pe.a,{placement:"bottom",show:b||w,target:k.current,children:function(e){return I=e.scheduleUpdate,e.show=void 0,Object(me.jsx)(Se.a,Object(P.a)(Object(P.a)({},e),{},{children:u}))}}),Object(me.jsx)(m.a,{variant:r,ref:k,onClick:function(e){h(!1),f(!0),null!=I&&I(),setTimeout((function(){null!=k.current&&f(!1)}),1e3),function(t,r,n){var c=document.createElement("textarea");c.style.position="fixed",c.style.top=0,c.style.left=0,c.style.width="2em",c.style.height="2em",c.style.padding=0,c.style.border="none",c.style.outline="none",c.style.boxShadow="none",c.style.background="transparent",c.value=t,document.body.appendChild(c),c.focus(),c.select();var a=null;try{document.execCommand("copy")}catch(e){a=e}r&&null===a&&r(),n&&null!==a&&n(a),document.body.removeChild(c)}(t,c,i)},children:C})]})},Le=function(e){var t=e.onClick,r=e.size,n=void 0===r?"md":r,c=e.variant,a=void 0===c?"light":c,s=e.tooltip,i=void 0===s?"Refresh":s,o=e.icon,u=void 0===o?Object(me.jsx)(g.F,{}):o;return Object(me.jsx)(Be,{tooltip:i,variant:a,onClick:t,size:n,children:u})},Ve=function(e){var t=e.headers,r=e.results,n=e.rowFn,c=e.keyFn,a=void 0===c?function(e){return e[0]}:c,s=e.actions,i=void 0===s?[]:s,o=e.emptyState,u=void 0===o?null:o;return r&&0!==r.length||null===u?Object(me.jsxs)(Ne.a,{children:[Object(me.jsx)("thead",{children:Object(me.jsxs)("tr",{children:[t.map((function(e){return Object(me.jsx)("th",{children:e},e)})),!!i&&i.length>0&&Object(me.jsx)("th",{})]})}),Object(me.jsx)("tbody",{children:r.map((function(e){return Object(me.jsxs)("tr",{children:[n(e).map((function(t,r){return Object(me.jsx)("td",{children:t},"".concat(a(e),"-").concat(r))})),!!i&&i.length>0&&Object(me.jsx)("td",{children:Object(me.jsx)("span",{className:"row-hover",children:i.map((function(t){return Object(me.jsx)("span",{children:t.buttonFn(e)},"".concat(a(e),"-").concat(t.key))}))})})]},a(e))}))})]}):Object(me.jsx)(Ie.a,{variant:"warning",children:u})},Me=function(e){var t=e.name,r=e.onAdd,n=e.onRemove,c=e.disabled,a=void 0!==c&&c,s=e.defaultChecked,i=void 0!==s&&s;return Object(me.jsx)(b.a.Group,{children:Object(me.jsx)(b.a.Check,{defaultChecked:i,disabled:a,type:"checkbox",name:t,onChange:function(e){e.currentTarget.checked?r(t):n(t)}})})},Ke=new RegExp("^s3://"),Ye=function(e){var t=e.config,r=e.onSubmit,c=e.onCancel,a=e.error,s=void 0===a?null:a,i=e.inProgress,o=void 0!==i&&i,u=e.sm,j=void 0===u?6:u,l=/^[a-z0-9][a-z0-9-]{2,62}$/,O=Object(n.useState)(!1),p=Object(d.a)(O,2),f=p[0],v=p[1],g=Object(n.useState)(!0),y=Object(d.a)(g,2),k=y[0],w=y[1],C=Object(n.useState)(!0),I=Object(d.a)(C,2),S=I[0],P=I[1],N=Object(n.useState)(!0),F=Object(d.a)(N,2),_=F[0],E=F[1],T=Object(n.useRef)(null),A=Object(n.useRef)(null),R=Object(n.useRef)(null),D=t?t.blockstore_namespace_ValidityRegex:Ke,q=RegExp(D),H=t?t.blockstore_namespace_example:"e.g. s3://example-bucket/";return Object(me.jsxs)(b.a,{className:"mt-5",onSubmit:function(e){e.preventDefault(),f&&r({name:R.current.value,storage_namespace:T.current.value,default_branch:A.current.value})},children:[Object(me.jsxs)(b.a.Group,{as:h.a,controlId:"id",children:[Object(me.jsx)(b.a.Label,{column:!0,sm:3,children:"Repository ID"}),Object(me.jsxs)(x.a,{sm:j,children:[Object(me.jsx)(b.a.Control,{type:"text",autoFocus:!0,ref:R,onChange:function(){var e=l.test(R.current.value);w(e),v(e&&S&&_)}}),!k&&Object(me.jsx)(b.a.Text,{className:"text-danger",children:"Min 2 characters. Only lowercase alphanumeric characters and '-' allowed."})]})]}),Object(me.jsxs)(b.a.Group,{as:h.a,children:[Object(me.jsx)(b.a.Label,{column:!0,sm:3,children:"Storage Namespace"}),Object(me.jsxs)(x.a,{sm:j,children:[Object(me.jsx)(b.a.Control,{type:"text",ref:T,placeholder:H,onChange:function(){var e=q.test(T.current.value);P(e),v(e&&_&&k)}}),!S&&Object(me.jsx)(b.a.Text,{className:"text-danger",children:"Invalid Storage Namespace."})]})]}),Object(me.jsxs)(b.a.Group,{as:h.a,controlId:"defaultBranch",children:[Object(me.jsx)(b.a.Label,{column:!0,sm:3,children:"Default Branch"}),Object(me.jsxs)(x.a,{sm:j,children:[Object(me.jsx)(b.a.Control,{type:"text",ref:A,placeholder:"defaultBranch",defaultValue:"main",onChange:function(){var e=A.current.value.length;E(e),v(e&&S&&k)}}),!_&&Object(me.jsx)(b.a.Text,{className:"text-danger",children:"Invalid Branch."})]})]}),s&&Object(me.jsx)(h.a,{children:Object(me.jsx)(x.a,{md:{span:j,offset:3},children:Object(me.jsx)(Ie.a,{variant:"danger",children:s.message})})}),Object(me.jsx)(h.a,{children:Object(me.jsxs)(x.a,{md:{span:j,offset:3},children:[Object(me.jsx)(m.a,{variant:"success",type:"submit",className:"mr-2",disabled:!f||o,children:o?"Creating...":"Create Repository"}),Object(me.jsx)(m.a,{variant:"secondary",onClick:function(e){e.preventDefault(),c()},children:"Cancel"})]})})]})},Je=function(e){var t=e.onPaginate,r=e.nextPage,n=void 0===r?null:r,c=e.after,a=void 0===c?"":c;return""===a&&null===n?Object(me.jsx)(me.Fragment,{}):Object(me.jsxs)("div",{className:"paginator mt-2 mb-2",children:[Object(me.jsx)(m.a,{variant:"secondary",disabled:""===a,onClick:function(){return t("")},children:"Back to Start"})," ",Object(me.jsx)(m.a,{variant:"primary",disabled:null===n,onClick:function(){return t(n)},children:"Next Page"})]})},We=r(47),$e=r(54),Qe=function(){var e=Object(l.a)(j.a.mark((function e(t,r){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.get(t,r);case 3:return n=e.sent,e.abrupt("return",{id:n.id,type:"branch"});case 7:if(e.prev=7,e.t0=e.catch(0),e.t0 instanceof L){e.next=11;break}throw e.t0;case 11:return e.prev=11,e.next=14,ce.get(t,r);case 14:return c=e.sent,e.abrupt("return",{id:c.id,type:"commit"});case 18:if(e.prev=18,e.t1=e.catch(11),e.t1 instanceof L){e.next=22;break}throw e.t1;case 22:throw new L("ref not found");case 23:case"end":return e.stop()}}),e,null,[[0,7],[11,18]])})));return function(t,r){return e.apply(this,arguments)}}(),Xe=Object(n.createContext)(null),Ze=function(){var e=Object(n.useContext)(Xe);return Object(d.a)(e,1)[0]},et={loading:!0,error:null,repo:null,reference:null,compare:null},tt=function(e){var t=e.children,r=de(),c=r.params.repoId,a=r.query,s=a.ref,i=a.compare,o=Object(n.useState)(et),u=Object(d.a)(o,2),b=u[0],h=u[1];return Object(n.useEffect)((function(){(function(){var e=Object(l.a)(j.a.mark((function e(){var t,r,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h(et),c){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,te.get(c);case 6:return t=e.sent,e.next=9,Qe(c,s||t.default_branch);case 9:if(r=e.sent,n=null,!i){e.next=15;break}return e.next=14,Qe(c,i);case 14:n=e.sent;case 15:h(Object(P.a)(Object(P.a)({},et),{},{loading:!1,repo:t,reference:r,compare:n})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),h(Object(P.a)(Object(P.a)({},et),{},{loading:!1,error:e.t0}));case 21:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(){return e.apply(this,arguments)}})()()}),[c,s,i]),Object(me.jsx)(Xe.Provider,{value:[b,fetch],children:t})},rt=function(e){var t=e.active,r=Ze(),n=r.repo,c=r.reference,a=r.loading,s=r.error,i=de(),o=a&&!s?"":n.id,u=function(e){var t=new URLSearchParams;return c&&t.append("ref",c.id),t.toString()?"".concat(e,"?").concat(t.toString()):e};return Object(me.jsxs)(C.a,{variant:"tabs",children:[Object(me.jsxs)(ve,{active:"objects"===t,href:function(e){var t=i.query.path,r=new URLSearchParams;return c&&r.append("ref",c.id),t&&r.append("path",t),r.toString()?"".concat(e,"?").concat(r.toString()):e}("/repositories/".concat(o,"/objects")),component:ge,children:[Object(me.jsx)(g.j,{})," Objects"]}),Object(me.jsxs)(ve,{active:"changes"===t,href:function(e){var t=new URLSearchParams;return c&&"branch"===c.type&&t.append("ref",c.id),t.toString()?"".concat(e,"?").concat(t.toString()):e}("/repositories/".concat(o,"/changes")),component:ge,children:[Object(me.jsx)(g.m,{})," Changes"]}),Object(me.jsxs)(ve,{active:"commits"===t,href:u("/repositories/".concat(o,"/commits")),component:ge,children:[Object(me.jsx)(g.s,{})," Commits"]}),Object(me.jsxs)(ve,{active:"branches"===t,href:"/repositories/".concat(o,"/branches"),component:ge,children:[Object(me.jsx)(g.r,{})," Branches"]}),Object(me.jsxs)(ve,{active:"compare"===t,href:u("/repositories/".concat(o,"/compare")),component:ge,children:[Object(me.jsx)(g.t,{})," Compare"]}),Object(me.jsxs)(ve,{active:"actions"===t,href:"/repositories/".concat(o,"/actions"),component:ge,children:[Object(me.jsx)(g.A,{})," Actions"]}),Object(me.jsxs)(ve,{active:"settings"===t,href:"/repositories/".concat(o,"/settings"),component:ge,children:[Object(me.jsx)(g.q,{})," Settings"]})]})},nt=function(){var e=Ze().repo,t=e?e.id:"#";return Object(me.jsxs)($e.a,{children:[Object(me.jsx)(ve,{href:{pathname:"/repositories"},component:$e.a.Item,children:"Repositories"}),Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/objects",params:{repoId:t}},component:$e.a.Item,active:!0,children:t})]})},ct=function(e){var t=e.activePage,r=e.children,n=e.fluid,c=void 0===n?"xl":n;return Object(me.jsx)(Ce,{children:Object(me.jsxs)("div",{children:[Object(me.jsx)(nt,{}),Object(me.jsx)(rt,{active:t}),Object(me.jsx)(We.a,{fluid:c,children:Object(me.jsx)("div",{className:"mt-4",children:r})})]})})},at=r(60),st=r(103),it=function(e){var t=e.repo,r=e.selected,c=e.branches,a=e.listBranches,s=e.selectRef,i=e.withCommits,o=e.withWorkspace,u=e.amount,h=void 0===u?300:u,x=Object(n.useState)({after:"",prefix:"",amount:h}),O=Object(d.a)(x,2),p=O[0],f=O[1],m={branch:r,commits:null,loading:!1},v=Object(n.useState)(m),g=Object(d.a)(v,2),y=g[0],k=g[1];Object(n.useEffect)((function(){a(t.id,p.prefix,p.after,p.amount)}),[t.id,a,p]);var w=Object(me.jsx)("div",{className:"ref-filter-form",children:Object(me.jsx)(b.a,{onSubmit:function(e){e.preventDefault()},children:Object(me.jsx)(b.a.Control,{type:"text",placeholder:"filter branches",onChange:function(e){f({amount:h,after:"",prefix:e.target.value})}})})});if(c.loading)return Object(me.jsxs)("div",{className:"ref-selector",children:[w,Object(me.jsx)("p",{children:"Loading..."})]});if(c.error)return Object(me.jsxs)("div",{className:"ref-selector",children:[w,Object(me.jsx)(Ie.a,{variant:"danger",children:c.error})]});if(null!==y.commits)return Object(me.jsx)(ot,{withWorkspace:o,commits:y.commits,branch:y.branch,selectRef:s,reset:function(){k(m)}});var C=c.payload.results;return Object(me.jsxs)("div",{className:"ref-selector",children:[w,Object(me.jsxs)("div",{className:"ref-scroller",children:[Object(me.jsx)("ul",{className:"list-group ref-list",children:C.map((function(e){return Object(me.jsx)(ut,{repo:t,branch:e.id,selectRef:s,selected:r,withCommits:i,logCommits:Object(l.a)(j.a.mark((function r(){var n;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ce.log(t.id,e.id);case 2:n=r.sent,k(Object(P.a)(Object(P.a)({},y),{},{branch:e.id,commits:n.results}));case 4:case"end":return r.stop()}}),r)})))},e.id)}))}),Object(me.jsx)(jt,{results:c.payload.results,pagination:c.payload.pagination,from:p.after,onPaginate:function(e){f({after:e})}})]})]})},ot=function(e){var t=e.commits,r=e.selectRef,n=e.reset,c=e.branch,a=e.withWorkspace,s=function(e){return e.message?e.message.length>60?e.message.substr(0,40)+"...":e.message:"repository epoch"};return Object(me.jsxs)("div",{className:"ref-selector",children:[Object(me.jsx)("h5",{children:c}),Object(me.jsxs)("div",{className:"ref-scroller",children:[Object(me.jsxs)("ul",{className:"list-group ref-list",children:[a?Object(me.jsx)("li",{className:"list-group-item",children:Object(me.jsx)(m.a,{variant:"link",onClick:function(){r({id:c,type:"branch"})},children:Object(me.jsxs)("em",{children:[c,"'s Workspace (uncommitted changes)"]})})},c):Object(me.jsx)("span",{}),t.map((function(e){return Object(me.jsxs)("li",{className:"list-group-item",children:[Object(me.jsxs)(m.a,{variant:"link",onClick:function(){r({id:e.id,type:"commit"})},children:[s(e)," "]}),Object(me.jsx)("div",{className:"actions",children:Object(me.jsx)(at.a,{variant:"light",children:e.id.substr(0,12)})})]},e.id)}))]}),Object(me.jsx)("p",{className:"ref-paginator",children:Object(me.jsx)(m.a,{variant:"link",size:"sm",onClick:n,children:"Back"})})]})]})},ut=function(e){var t=e.repo,r=e.branch,n=e.selectRef,c=e.selected,a=e.logCommits,s=e.withCommits;return Object(me.jsxs)("li",{className:"list-group-item",children:[c&&r===c?Object(me.jsx)("strong",{children:r}):Object(me.jsx)(m.a,{variant:"link",onClick:function(){n({id:r,type:"branch"})},children:r}),Object(me.jsxs)("div",{className:"actions",children:[r===t.default_branch?Object(me.jsx)(at.a,{variant:"info",children:"Default"}):Object(me.jsx)("span",{}),s?Object(me.jsx)(m.a,{onClick:a,size:"sm",variant:"link",children:Object(me.jsx)(g.f,{})}):Object(me.jsx)("span",{})]})]},r)},jt=function(e){var t=e.pagination,r=e.onPaginate,n=e.results,c=e.from,a=n.length?n[n.length-1].id:"";return t.has_more||""!==c?Object(me.jsxs)("p",{className:"ref-paginator",children:[""!==c?Object(me.jsx)(m.a,{size:"sm",variant:"link",onClick:function(){r("")},children:"Reset"}):Object(me.jsx)("span",{})," ",t.has_more?Object(me.jsx)(m.a,{size:"sm",variant:"link",onClick:function(){r(a)},children:"Next..."}):Object(me.jsx)("span",{})]}):Object(me.jsx)("span",{})},lt=function(e){var t=e.repo,r=e.selected,c=e.selectRef,a=e.onCancel,s=e.variant,i=void 0===s?"light":s,o=e.prefix,u=void 0===o?"":o,b=e.emptyText,h=void 0===b?"":b,x=e.withCommits,O=void 0===x||x,p=e.withWorkspace,f=void 0===p||p,v=Object(n.useState)(!1),y=Object(d.a)(v,2),k=y[0],w=y[1],C=Object(n.useRef)(null),I=Object(n.useState)({loading:!0,payload:null,error:null}),S=Object(d.a)(I,2),P=S[0],N=S[1],F=Object(n.useCallback)(function(){var e=Object(l.a)(j.a.mark((function e(t,r,n,c){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N({loading:!0,payload:null,error:null}),e.prev=1,e.next=4,re.list(t,r,n,c);case 4:a=e.sent,N({loading:!1,payload:a,error:null}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),N({loading:!1,payload:null,error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r,n,c){return e.apply(this,arguments)}}(),[]),_=Object(me.jsx)(Pe.a,{target:C.current,show:k,placement:"bottom",rootClose:!0,onHide:function(){return w(!1)},children:Object(me.jsx)(st.a,{className:"ref-popover",children:Object(me.jsx)(st.a.Content,{children:Object(me.jsx)(it,{repo:t,branches:P,withCommits:O,listBranches:F,withWorkspace:f,selected:r,selectRef:function(e){c(e),w(!1)}})})})}),E=a&&r?Object(me.jsx)(m.a,{onClick:function(){w(!1),a()},variant:i,children:Object(me.jsx)(g.J,{})}):Object(me.jsx)("span",{});if(!r)return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(m.a,{ref:C,variant:i,onClick:function(){w(!k)},children:[h," ",k?Object(me.jsx)(g.g,{}):Object(me.jsx)(g.e,{})]}),E,_]});var T,A=u+!!r?"".concat(u," ").concat(r.type,": "):"";return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(m.a,{ref:C,variant:i,onClick:function(){w(!k)},children:[A," ",Object(me.jsx)("strong",{children:(T=r,T?"commit"===T.type?T.id.substr(0,12):T.id:"")})," ",k?Object(me.jsx)(g.g,{}):Object(me.jsx)(g.e,{})]}),E,_]})},dt=r(34),bt=function(e){var t=e.show,r=e.onHide,n=e.msg,c=e.onConfirm,a=e.variant,s=void 0===a?"danger":a;return Object(me.jsxs)(v.a,{show:t,onHide:r,children:[Object(me.jsx)(v.a.Header,{children:Object(me.jsx)(v.a.Title,{children:"Confirmation"})}),Object(me.jsx)(v.a.Body,{children:n}),Object(me.jsxs)(v.a.Footer,{children:[Object(me.jsx)(m.a,{variant:s,onClick:c,children:"Yes"}),Object(me.jsx)(m.a,{variant:"secondary",onClick:r,children:"Cancel"})]})]})},ht=function(e){var t=e.msg,r=e.onConfirm,c=e.variant,a=e.modalVariant,s=e.size,i=e.disabled,o=void 0!==i&&i,u=e.tooltip,j=void 0===u?null:u,l=e.children,b=Object(n.useState)(!1),h=Object(d.a)(b,2),x=h[0],O=h[1],p=Object(me.jsx)(m.a,{variant:c,size:s,disabled:o,onClick:function(){return O(!0)},children:l});null!==j&&(p=Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{children:j}),children:p}));var f=function(){return O(!1)};return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(bt,{show:x,variant:a,onConfirm:function(){r(f)},onHide:f,msg:t}),p]})},xt=function(e){if(!e)return"0.0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(1)+" "+" KMGTP".charAt(t)+"B"},Ot=function(){return Object(me.jsx)("span",{children:"\u2014"})},pt=function(e){var t=e.repo,r=e.reference,c=e.entry,a=e.onDelete,s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],j='are you sure you wish to delete object "'.concat(c.path,'"?');return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(dt.a,{alignRight:!0,children:[Object(me.jsx)(dt.a.Toggle,{variant:"light",size:"sm",children:"More Actions"}),Object(me.jsxs)(dt.a.Menu,{children:[Object(me.jsxs)(ft,{path:c.path,reference:r,repoId:t.id,as:dt.a.Item,children:[Object(me.jsx)(g.l,{})," "," "," Download"]}),Object(me.jsxs)(dt.a.Item,{onClick:function(e){e.preventDefault(),u(!0)},children:[Object(me.jsx)(g.G,{})," "," "," Delete"]})]})]}),Object(me.jsx)(bt,{show:o,onHide:function(){return u(!1)},msg:j,onConfirm:function(){a(c),u(!1)}})]})},ft=function(e){var t=e.repoId,r=e.reference,n=e.path,a=e.children,s=e.as,i=void 0===s?null:s,o=function(e,t,r){var n=H({path:r});return"".concat(A,"/repositories/").concat(e,"/refs/").concat(t,"/objects?").concat(n)}(t,r.id,n);return null===i?Object(me.jsx)("a",{href:o,download:!0,children:a}):c.a.createElement(i,{children:a,href:o,download:!0})},mt=function(e){var t=e.repo,r=e.reference,n=e.path,c=e.entry,a=e.onDelete,s=e.showActions,i="tree-row ";switch(c.diff_type){case"changed":i+="diff-changed";break;case"added":i+="diff-added";break;case"removed":i+="diff-removed"}var o,u,j,l,d,b=n.length>0?c.path.substr(n.length):c.path,h={repoId:t.id},x={ref:r.id,path:c.path};switch(o="common_prefix"===c.path_type?Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/objects",query:x,params:h},children:b}):"removed"===c.diff_type?Object(me.jsx)("span",{children:b}):Object(me.jsx)(ft,{repoId:t.id,reference:r,path:c.path,children:b}),u="removed"===c.diff_type||"common_prefix"===c.path_type?Object(me.jsx)(Ot,{}):Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsxs)(Se.a,{children:[c.size_bytes," bytes"]}),children:Object(me.jsx)("span",{children:xt(c.size_bytes)})}),j="removed"===c.diff_type||"common_prefix"===c.path_type?Object(me.jsx)(Ot,{}):Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{children:k.a.unix(c.mtime).format("MM/DD/YYYY HH:mm:ss")}),children:Object(me.jsx)("span",{children:k.a.unix(c.mtime).fromNow()})}),c.diff_type){case"removed":l=Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{children:"removed in diff"}),children:Object(me.jsx)("span",{children:Object(me.jsx)(g.G,{})})});break;case"added":l=Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{children:"added in diff"}),children:Object(me.jsx)("span",{children:Object(me.jsx)(g.B,{})})});break;case"changed":l=Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{children:"changed in diff"}),children:Object(me.jsx)("span",{children:Object(me.jsx)(g.z,{})})})}return s&&"object"===c.path_type&&"removed"!==c.diff_type&&(d=Object(me.jsx)(pt,{repo:t,reference:r,entry:c,onDelete:a})),Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)("tr",{className:i,children:[Object(me.jsx)("td",{className:"diff-indicator",children:l}),Object(me.jsxs)("td",{className:"tree-path",children:["common_prefix"===c.path_type?Object(me.jsx)(g.n,{}):Object(me.jsx)(g.o,{})," "," ",o]}),Object(me.jsx)("td",{className:"tree-size",children:u}),Object(me.jsx)("td",{className:"tree-modified",children:j}),Object(me.jsx)("td",{className:"tree-row-actions",children:d})]})})};var vt=function(e){var t=e.repo,r=e.reference,n=function(e){var t=e.split(/\//),r=[];if(0===t.length)return r;""===t[t.length-1]&&(t=t.slice(0,t.length-1));for(var n=0;n<t.length;n++){var c=t.slice(0,n+1).join("/");c.length>0&&(c="".concat(c,"/")),r.push({name:t[n],path:c})}return r}(e.path),c={repoId:t.id};return Object(me.jsxs)("span",{className:"lakefs-uri",children:[Object(me.jsx)("strong",{children:"lakefs://"}),Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/objects",params:c},children:t.id}),Object(me.jsx)("strong",{children:"/"}),Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/objects",params:c,query:{ref:r.id}},children:"commit"===r.type?r.id.substr(0,12):r.id}),Object(me.jsx)("strong",{children:"/"}),n.map((function(e,t){var a={path:n.slice(0,t+1).map((function(e){return e.name})).join("/")+"/",ref:r.id};return Object(me.jsxs)("span",{children:[Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/objects",params:c,query:a},children:e.name}),Object(me.jsx)("strong",{children:"/"})]},t)}))]})},gt=function(e){var t=e.onUpload;return Object(me.jsxs)(We.a,{className:"m-4 mb-5",children:[Object(me.jsx)("h2",{className:"mt-2",children:"To get started with this repository, you can:"}),Object(me.jsxs)(h.a,{className:"pt-2 ml-2",children:[Object(me.jsx)(g.k,{className:"mr-1 mt-1"}),Object(me.jsx)(m.a,{variant:"link",onClick:t,children:"Upload"}),"\xa0an object."]}),Object(me.jsxs)(h.a,{className:"pt-2 ml-2",children:[Object(me.jsx)(g.k,{className:"mr-1 mt-1"}),"See the \xa0",Object(me.jsx)("a",{href:"https://docs.lakefs.io/using/",target:"_blank",rel:"noopener noreferrer",children:"docs"}),"\xa0for other ways to import data to your repository."]})]})},yt=function(e){var t,r=e.repo,n=e.reference,c=e.results,a=e.after,s=e.onPaginate,i=e.nextPage,o=e.onUpload,u=e.onDelete,j=e.showActions,l=void 0!==j&&j,d=e.path,b=void 0===d?"":d;return t=0===c.length&&""===b?Object(me.jsx)(gt,{onUpload:o}):Object(me.jsx)(me.Fragment,{children:Object(me.jsx)(Ne.a,{borderless:!0,size:"sm",children:Object(me.jsx)("tbody",{children:c.map((function(e){return Object(me.jsx)(mt,{entry:e,path:b,repo:r,reference:n,showActions:l,onDelete:u},e.path)}))})})}),Object(me.jsxs)("div",{className:"tree-container",children:[Object(me.jsxs)(O.a,{children:[Object(me.jsx)(O.a.Header,{children:Object(me.jsx)(vt,{path:b,repo:r,reference:n})}),Object(me.jsx)(O.a.Body,{children:t})]}),Object(me.jsx)(Je,{onPaginate:s,nextPage:i,after:a})]})},kt=function(e){var t=e.repo,r=e.reference,c=e.path,a=e.onDone,s=e.variant,i=void 0===s?"success":s,o=e.onClick,u=e.onHide,O=e.show,p=void 0!==O&&O,f={inProgress:!1,error:null,done:!1},y=Object(n.useState)(f),k=Object(d.a)(y,2),w=k[0],C=k[1],I=Object(n.useRef)(null),S=Object(n.useRef)(null);if(!r||"branch"!==r.type)return Object(me.jsx)(me.Fragment,{});var N=function(){w.inProgress||(C(f),u())},F=function(){var e=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(Object(P.a)(Object(P.a)({},f),{},{inProgress:!0})),e.prev=1,e.next=4,ne.upload(t.id,r.id,I.current.value,S.current.files[0]);case 4:C(Object(P.a)({},f)),a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),C(Object(P.a)(Object(P.a)({},f),{},{error:e.t0}));case 11:u();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),_="".concat(t.id,"/").concat(r.id,"/\xa0");return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(v.a,{show:p,onHide:N,children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsx)(v.a.Title,{children:"Upload Object"})}),Object(me.jsxs)(v.a.Body,{children:[Object(me.jsxs)(b.a,{onSubmit:function(e){w.inProgress||(F(),e.preventDefault())},children:[Object(me.jsx)(b.a.Group,{controlId:"path",children:Object(me.jsxs)(h.a,{noGutters:!0,children:[Object(me.jsx)(x.a,{className:"col-auto d-flex align-items-center justify-content-start",children:_}),Object(me.jsx)(x.a,{style:{"min-width":"25%"},children:Object(me.jsx)(b.a.Control,{type:"text",placeholder:"Object name",autoFocus:!0,name:"text",ref:I,defaultValue:c})})]})}),Object(me.jsx)(b.a.Group,{controlId:"content",children:Object(me.jsx)(b.a.Control,{type:"file",name:"content",ref:S,onChange:function(e){var t=I.current.value.substr(0,I.current.value.lastIndexOf("/")+1),r=e.currentTarget.files.length>0?e.currentTarget.files[0].name:"";I.current.value=t+r}})})]}),w.error?Object(me.jsx)(De,{error:w.error}):Object(me.jsx)(me.Fragment,{})]}),Object(me.jsxs)(v.a.Footer,{children:[Object(me.jsx)(m.a,{variant:"secondary",disabled:w.inProgress,onClick:N,children:"Cancel"}),Object(me.jsx)(m.a,{variant:"success",disabled:w.inProgress,onClick:function(){w.inProgress||F()},children:w.inProgress?"Uploading...":"Upload"})]})]}),Object(me.jsxs)(m.a,{variant:i,onClick:o,children:[Object(me.jsx)(g.H,{})," Upload Object"]})]})},wt=function(e){var t=e.repo,r=e.reference,n=e.path,c=e.after,a=e.onPaginate,s=e.onRefresh,i=e.onUpload,o=e.refreshToken,u=he((function(){return ne.list(t.id,r.id,n,c)}),[t.id,r.id,n,c,o]),j=u.results,l=u.error,d=u.loading,b=u.nextPage;return d?Object(me.jsx)(Ae,{}):l?Object(me.jsx)(De,{error:l}):Object(me.jsx)(yt,{repo:t,reference:r,path:n||"",showActions:!0,results:j,after:c,nextPage:b,onPaginate:a,onUpload:i,onDelete:function(e){ne.delete(t.id,r.id,e.path).catch((function(e){return console.log(e)})).then(s)}})},Ct=function(){var e=de(),t=e.query,r=t.path,c=t.after,a=Ze(),s=a.repo,i=a.reference,o=a.loading,u=a.error,j=Object(n.useState)(!1),l=Object(d.a)(j,2),b=l[0],h=l[1],x=Object(n.useState)(!1),O=Object(d.a)(x,2),p=O[0],f=O[1],m=function(){return f(!p)};return o?Object(me.jsx)(Ae,{}):u?Object(me.jsx)(De,{error:u}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(lt,{emptyText:"Select Branch",repo:s,selected:i,withCommits:!0,withWorkspace:!0,selectRef:function(t){return e.push({pathname:"/repositories/:repoId/objects",params:{repoId:s.id},query:{ref:t.id}})}})}),Object(me.jsxs)(He,{orientation:"right",children:[Object(me.jsx)(Le,{onClick:m}),Object(me.jsx)(kt,{path:r,repo:s,reference:i,onDone:m,onClick:function(){h(!0)},onHide:function(){h(!1)},show:b})]})]}),Object(me.jsx)(wt,{reference:i,repo:s,path:r||"",after:c||"",onPaginate:function(t){var n={after:t};r&&(n.path=r),i&&(n.ref=i.id);var c={pathname:"/repositories/:repoId/objects",query:n,params:{repoId:s.id}};e.push(c)},refreshToken:p,onUpload:function(){h(!0)},onRefresh:m})]})},It=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"objects",children:Object(me.jsx)(Ct,{})})})};var St=function(e){var t=e.entry,r=e.onRevert,c=Object(n.useState)(!1),a=Object(d.a)(c,2),s=a[0],i=a[1],o='Are you sure you wish to revert "'.concat(t.path,'" (').concat(t.type,")?");return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Fe.a,{overlay:Object(me.jsx)(Se.a,{id:"revert-entry",children:"Revert change"}),children:Object(me.jsx)(m.a,{variant:"link",disabled:!1,onClick:function(e){e.preventDefault(),i(!0)},children:Object(me.jsx)(g.v,{})})},"bottom"),Object(me.jsx)(bt,{show:s,onHide:function(){return i(!1)},msg:o,onConfirm:function(){r(t),i(!1)}})]})},Pt=function(e){var t=e.entry,r=e.showActions,n=e.onRevert,c="tree-row ";switch(t.type){case"changed":c+="diff-changed";break;case"added":c+="diff-added";break;case"removed":c+="diff-removed";break;case"conflict":c+="diff-conflict"}var a,s,i=t.path;switch(t.type){case"removed":a=Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{id:"tooltip-removed",children:"Removed"}),children:Object(me.jsx)("span",{children:Object(me.jsx)(g.G,{})})});break;case"added":a=Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{id:"tooltip-added",children:"Added"}),children:Object(me.jsx)("span",{children:Object(me.jsx)(g.B,{})})});break;case"changed":a=Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{id:"tooltip-changed",children:"Changed"}),children:Object(me.jsx)("span",{children:Object(me.jsx)(g.z,{})})});break;case"conflict":a=Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{id:"tooltip-conflict",children:"Conflict"}),children:Object(me.jsx)("span",{children:Object(me.jsx)(g.h,{})})})}return r&&(s=Object(me.jsx)(St,{entry:t,onRevert:n})),Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)("tr",{className:c,children:[Object(me.jsx)("td",{className:"diff-indicator",children:a}),Object(me.jsx)("td",{className:"tree-path",children:Object(me.jsx)("span",{children:i})}),Object(me.jsx)("td",{className:"tree-row-actions",children:s})]})})},Nt=function(e){var t=e.repo,r=e.onCommit,c=e.enabled,a=void 0!==c&&c,s=Object(n.useRef)(null),i=Object(n.useState)(!1),o=Object(d.a)(i,2),u=o[0],j=o[1],l=Object(n.useState)(!1),O=Object(d.a)(l,2),p=O[0],f=O[1],y=Object(n.useState)([]),k=Object(d.a)(y,2),w=k[0],C=k[1],I=function(){u||f(!1)},P=function(){var e=s.current.value,t={};w.forEach((function(e){return t[e.key]=e.value})),j(!0),r({message:e,metadata:t},(function(){j(!1),f(!1)}))},N=function(e,t){if(!t)return"";var r=t.split("\n"),n=function(e){var t=/^Error: (\S+) hook aborted, run id '([^']+)'/.exec(e);return t?t[2]:""}(t);return 1===r.length?Object(me.jsx)(Ie.a.Heading,{children:t}):r.map((function(t,r){if(n){var c=function(e){var t=/^\t\* hook run id '([^']+)' failed/.exec(e);return t?t[1]:""}(t),a="/repositories/".concat(e,"/actions/").concat(n);return c&&(a="/repositories/".concat(e,"/actions/").concat(n,"/").concat(c)),Object(me.jsx)("p",{children:Object(me.jsx)(Ie.a.Link,{href:a,children:t})},r)}return Object(me.jsx)("p",{children:t},r)}))}(t.id,null);return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(v.a,{show:p,onHide:I,size:"lg",children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsx)(v.a.Title,{children:"Commit Changes"})}),Object(me.jsxs)(v.a.Body,{children:[Object(me.jsxs)(b.a,{className:"mb-2",onSubmit:function(e){P(),e.preventDefault()},children:[Object(me.jsx)(b.a.Group,{controlId:"message",children:Object(me.jsx)(b.a.Control,{type:"text",placeholder:"Commit Message",ref:s})}),w.map((function(e,t){return Object(me.jsx)(b.a.Group,{controlId:"message",children:Object(me.jsxs)(h.a,{children:[Object(me.jsx)(x.a,{md:{span:5},children:Object(me.jsx)(b.a.Control,{type:"text",placeholder:"Key",defaultValue:e.key,onChange:function(e){w[t].key=e.currentTarget.value,C(w)}})}),Object(me.jsx)(x.a,{md:{span:5},children:Object(me.jsx)(b.a.Control,{type:"text",placeholder:"Value",defaultValue:e.value,onChange:function(e){w[t].value=e.currentTarget.value,C(w)}})}),Object(me.jsx)(x.a,{md:{span:1},children:Object(me.jsx)(b.a.Text,{children:Object(me.jsx)(m.a,{size:"sm",variant:"secondary",onClick:function(){C([].concat(Object(S.a)(w.slice(0,t)),Object(S.a)(w.slice(t+1))))},children:Object(me.jsx)(g.J,{})})})})]})},"commit-metadata-field-".concat(e.key,"-").concat(e.value,"-").concat(t))})),Object(me.jsxs)(m.a,{onClick:function(){C([].concat(Object(S.a)(w),[{key:"",value:""}]))},size:"sm",variant:"secondary",children:[Object(me.jsx)(g.B,{})," ","Add Metadata field"]})]}),N?Object(me.jsx)(Ie.a,{variant:"danger",children:N}):Object(me.jsx)("span",{})]}),Object(me.jsxs)(v.a.Footer,{children:[Object(me.jsx)(m.a,{variant:"secondary",disabled:u,onClick:I,children:"Cancel"}),Object(me.jsx)(m.a,{variant:"success",disabled:u,onClick:P,children:"Commit Changes"})]})]}),Object(me.jsxs)(m.a,{variant:"success",disabled:!a,onClick:function(){return f(!0)},children:[Object(me.jsx)(g.s,{})," Commit Changes"," "]})]})},Ft=function(e){var t=e.onRevert,r=e.enabled,c=void 0!==r&&r,a=Object(n.useState)(!1),s=Object(d.a)(a,2),i=s[0],o=s[1],u=function(){return o(!1)};return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(bt,{show:i,onHide:u,msg:"Are you sure you want to revert all uncommitted changes?",onConfirm:function(){t(),u()}}),Object(me.jsxs)(m.a,{variant:"light",disabled:!c,onClick:function(){return o(!0)},children:[Object(me.jsx)(g.v,{})," Revert"]})]})},_t=function(e){var t=e.repo,r=e.reference,c=e.after,a=e.onSelectRef,s=e.onPaginate,i=Object(n.useState)(null),o=Object(d.a)(i,2),u=o[0],b=o[1],h=Object(n.useState)(!0),x=Object(d.a)(h,2),p=x[0],f=x[1],m=he(Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",ae.changes(t.id,r.id,c));case 3:case"end":return e.stop()}}),e)}))),[t.id,r.id,p,c]),v=m.results,g=m.error,y=m.loading,k=m.nextPage,w=function(){return f(!p)};if(g)return Object(me.jsx)(De,{error:g});if(y)return Object(me.jsx)(Ae,{});var C=u?Object(me.jsx)(De,{error:u,onDismiss:function(){return b(null)}}):Object(me.jsx)(me.Fragment,{});return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(lt,{emptyText:"Select Branch",repo:t,selected:r||null,withCommits:!1,withWorkspace:!1,selectRef:a})}),Object(me.jsxs)(He,{orientation:"right",children:[Object(me.jsx)(Le,{onClick:w}),Object(me.jsx)(Ft,{enabled:v.length>0,onRevert:function(){re.revert(t.id,r.id,{type:"reset"}).then(w).catch((function(e){return b(e)}))}}),Object(me.jsx)(Nt,{repo:t,enabled:v.length>0,onCommit:function(e,n){ce.commit(t.id,r.id,e.message,e.metadata).then((function(){n(),w()}))}})]})]}),C,Object(me.jsxs)("div",{className:"tree-container",children:[0===v.length?Object(me.jsx)(Ie.a,{variant:"info",children:"No changes"}):Object(me.jsx)(O.a,{children:Object(me.jsx)(Ne.a,{borderless:!0,size:"sm",children:Object(me.jsx)("tbody",{children:v.map((function(e){return Object(me.jsx)(Pt,{entry:e,showActions:!0,onRevert:function(e){re.revert(t.id,r.id,{type:"object",path:e.path}).then((function(){f(!p)})).catch((function(e){b(e)}))}},e.path)}))})})}),Object(me.jsx)(Je,{onPaginate:s,nextPage:k,after:c})]})]})},Et=function(){var e=de(),t=Ze(),r=t.repo,n=t.reference,c=t.loading,a=t.error,s=e.query.after;return c?Object(me.jsx)(Ae,{}):a?Object(me.jsx)(De,{error:a}):Object(me.jsx)(_t,{after:s||"",repo:r,reference:n,onPaginate:function(t){return e.push({pathname:"/repositories/:repoId/changes",params:{repoId:r.id},query:{ref:n.id,after:t}})},onSelectRef:function(t){return e.push({pathname:"/repositories/:repoId/changes",params:{repoId:r.id},query:{ref:t.id}})}})},Tt=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"changes",children:Object(me.jsx)(Et,{})})})},At=r(52),Rt=r(43),Dt=function(e){var t=e.repo,r=e.branch,n=e.onDelete,c="outline-dark",a=t.default_branch===r.id,s=Object(me.jsxs)(me.Fragment,{children:["Are you sure you wish to delete branch ",Object(me.jsx)("strong",{children:r.id})," ?"]});return"import-from-inventory"===r.id&&(s=Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("p",{children:s}),Object(me.jsxs)(Ie.a,{variant:"warning",children:[Object(me.jsx)("strong",{children:"Warning"})," this is a system branch used for importing data to lakeFS"]})]})),Object(me.jsx)(Rt.a.Item,{children:Object(me.jsxs)("div",{className:"clearfix",children:[Object(me.jsx)("div",{className:"float-left",children:Object(me.jsxs)("h6",{children:[Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/objects",params:{repoId:t.id},query:{ref:r.id}},children:r.id}),a&&Object(me.jsxs)(me.Fragment,{children:[" ",Object(me.jsx)(at.a,{variant:"info",children:"Default"})]})]})}),Object(me.jsxs)("div",{className:"float-right",children:[!a&&Object(me.jsx)(At.a,{className:"commit-actions",children:Object(me.jsx)(ht,{variant:"outline-danger",disabled:a,msg:s,tooltip:"delete branch",onConfirm:function(){re.delete(t.id,r.id).catch((function(e){return alert(e)})).then((function(){return n(r.id)}))},children:Object(me.jsx)(g.G,{})})}),Object(me.jsxs)(At.a,{className:"branch-actions ml-2",children:[Object(me.jsx)(Ge,{href:{pathname:"/repositories/:repoId/commits/:commitId",params:{repoId:t.id,commitId:r.commit_id}},buttonVariant:"outline-dark",tooltip:"View referenced commit",children:r.commit_id.substr(0,12)}),Object(me.jsx)(ze,{variant:c,text:r.id,tooltip:"Copy ID to clipboard"}),Object(me.jsx)(ze,{variant:c,text:"lakefs://".concat(t.id,"/").concat(r.id),tooltip:"Copy URI to clipboard",icon:Object(me.jsx)(g.x,{})}),Object(me.jsx)(ze,{variant:c,text:"s3://".concat(t.id,"/").concat(r.id),tooltip:"Copy S3 URI to clipboard",icon:Object(me.jsx)(g.y,{})})]})]})]})})},qt=function(e){var t=e.repo,r=e.variant,c=void 0===r?"success":r,a=e.onCreate,s=void 0===a?null:a,i=e.children,o=Object(n.useState)(!1),u=Object(d.a)(o,2),j=u[0],l=u[1],h=Object(n.useState)(!1),x=Object(d.a)(h,2),O=x[0],p=x[1],f=Object(n.useState)(null),g=Object(d.a)(f,2),y=g[0],k=g[1],w=Object(n.useRef)(null),C=Object(n.useMemo)((function(){return{id:t.default_branch,type:"branch"}}),[t.default_branch]),I=Object(n.useState)(C),S=Object(d.a)(I,2),P=S[0],N=S[1],F=function(){O||l(!1)},_=function(){p(!0);var e=w.current.value,r=P.id;re.create(t.id,e,r).catch((function(e){k(e)})).then((function(e){k(!1),p(!1),l(!1),null!==s&&s(e)}))};return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(v.a,{show:j,onHide:F,children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:"Create Branch"}),Object(me.jsxs)(v.a.Body,{children:[Object(me.jsxs)(b.a,{onSubmit:function(e){_(),e.preventDefault()},children:[Object(me.jsx)(b.a.Group,{controlId:"name",children:Object(me.jsx)(b.a.Control,{type:"text",placeholder:"Branch Name",name:"text",ref:w})}),Object(me.jsx)(b.a.Group,{controlId:"source",children:Object(me.jsx)(lt,{repo:t,emptyText:"Select Source Branch",prefix:"From ",selected:P,selectRef:function(e){N(e)},withCommits:!0,withWorkspace:!1})})]}),!!y&&Object(me.jsx)(De,{error:y})]}),Object(me.jsxs)(v.a.Footer,{children:[Object(me.jsx)(m.a,{variant:"secondary",disabled:O,onClick:F,children:"Cancel"}),Object(me.jsx)(m.a,{variant:"success",onClick:_,disabled:O,children:"Create"})]})]}),Object(me.jsx)(m.a,{variant:c,onClick:function(){l(!0)},children:i})]})},Ht=function(e){var t,r=e.repo,c=e.prefix,a=e.after,s=e.onPaginate,i=Object(n.useState)(!0),o=Object(d.a)(i,2),u=o[0],b=o[1],h=he(Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.list(r.id,c,a));case 1:case"end":return e.stop()}}),e)}))),[r.id,u,c,a]),x=h.results,p=h.error,f=h.loading,m=h.nextPage,v=function(){return b(!u)};return t=f?Object(me.jsx)(Ae,{}):p?Object(me.jsx)(De,{error:p}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(O.a,{children:Object(me.jsx)(Rt.a,{variant:"flush",children:x.map((function(e){return Object(me.jsx)(Dt,{repo:r,branch:e,onDelete:v},e.id)}))})}),Object(me.jsx)(Je,{onPaginate:s,nextPage:m,after:a})]}),Object(me.jsxs)("div",{className:"mb-5",children:[Object(me.jsx)(Ue,{children:Object(me.jsxs)(He,{orientation:"right",children:[Object(me.jsx)(Le,{onClick:v}),Object(me.jsxs)(qt,{repo:r,variant:"success",onCreate:v,children:[Object(me.jsx)(g.r,{})," Create Branch"]})]})}),t]})},Ut=function(){var e=de(),t=Ze(),r=t.repo,n=t.loading,c=t.error,a=e.query.after,s=e.query.prefix?e.query.prefix:"";return n?Object(me.jsx)(Ae,{}):c?Object(me.jsx)(De,{error:c}):Object(me.jsx)(Ht,{repo:r,after:a||"",prefix:s,onPaginate:function(t){var n={after:t};e.query.prefix&&(n.prefix=e.query.prefix),e.push({pathname:"/repositories/:repoId/branches",params:{repoId:r.id},query:n})}})},Gt=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"branches",children:Object(me.jsx)(Ut,{})})})},Bt=function(e){var t=e.repo,r=e.reference,c=e.compareReference,a=e.after,s=e.onSelectRef,i=e.onSelectCompare,o=e.onPaginate;null===c&&(c=r);var u,b=Object(n.useState)(!0),h=Object(d.a)(b,2),x=h[0],p=h[1],f=Object(n.useState)(null),m=Object(d.a)(f,2),v=m[0],y=m[1],k=Object(n.useState)(!1),w=Object(d.a)(k,2),C=w[0],I=w[1],S=function(){p(!x),y(null)},P=he(Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.id===r.id){e.next=2;break}return e.abrupt("return",ae.diff(t.id,c.id,r.id,a));case 2:return e.abrupt("return",{pagination:{has_more:!1},results:[]});case 3:case"end":return e.stop()}}),e)}))),[t.id,r.id,c.id,x,a]),N=P.results,F=P.error,_=P.loading,E=P.nextPage;u=_?Object(me.jsx)(Ae,{}):F?Object(me.jsx)(De,{error:F}):c.id===r.id?Object(me.jsxs)(Ie.a,{variant:"warning",children:[Object(me.jsx)(Ie.a.Heading,{children:"There isn\u2019t anything to compare."}),"You\u2019ll need to use two different sources to get a valid comparison."]}):Object(me.jsxs)("div",{className:"tree-container",children:[0===N.length?Object(me.jsx)(Ie.a,{variant:"info",children:"No changes"}):Object(me.jsx)(O.a,{children:Object(me.jsx)(Ne.a,{borderless:!0,size:"sm",children:Object(me.jsx)("tbody",{children:N.map((function(e){return Object(me.jsx)(Pt,{entry:e,showActions:!1},e.path)}))})})}),Object(me.jsx)(Je,{onPaginate:o,nextPage:E,after:a})]});var T=!_&&!F&&!!N&&0===N.length;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(Ue,{children:[Object(me.jsxs)(He,{orientation:"left",children:[Object(me.jsx)(lt,{prefix:"Base ",repo:t,selected:r||null,withCommits:!0,withWorkspace:!1,selectRef:s}),Object(me.jsx)(g.a,{className:"mr-2 mt-2",size:"small",verticalAlign:"middle"}),Object(me.jsx)(lt,{prefix:"Compared to ",emptyText:"Compare with...",repo:t,selected:c||null,withCommits:!0,withWorkspace:!1,selectRef:i})]}),Object(me.jsxs)(He,{orientation:"right",children:[Object(me.jsx)(Le,{onClick:S}),"branch"===c.type&&"branch"===r.type&&Object(me.jsxs)(ht,{variant:"success",disabled:c.id===r.id||C||T,msg:"Are you sure you'd like to merge '".concat(c.id,"' into '").concat(r.id,"'?"),tooltip:"merge '".concat(c.id,"' into '").concat(r.id,"'"),onConfirm:function(e){I(!0),e(),ae.merge(t.id,c.id,r.id).then((function(){y(null),I(!1),S()})).catch((function(e){y(e),I(!1)}))},children:[Object(me.jsx)(g.u,{})," ",C?"Merging...":"Merge"]})]})]}),v&&Object(me.jsx)(De,{error:v}),u]})},zt=function(){var e=de(),t=Ze(),r=t.loading,n=t.error,c=t.repo,a=t.reference,s=t.compare,i=e.query.after;if(r)return Object(me.jsx)(Ae,{});if(n)return Object(me.jsx)(De,{error:n});var o=function(t){return e.push({pathname:"/repositories/:repoId/compare",params:{repoId:c.id},query:t})};return Object(me.jsx)(Bt,{repo:c,after:i||"",reference:a,onSelectRef:function(e){return o(s?{ref:e.id,compare:s.id}:{ref:e.id})},compareReference:s,onSelectCompare:function(e){return o(a?{ref:a.id,compare:e.id}:{compare:e.id})},onPaginate:function(e){var t={after:e};s&&(t.compare=s.id),a&&(t.ref=a.id),o(t)}})},Lt=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"compare",children:Object(me.jsx)(zt,{})})})},Vt=function(e){var t=e.repo,r=e.commit,n=e.after,c=e.onPaginate,a=he(Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.parents&&0!==r.parents.length){e.next=2;break}return e.abrupt("return",{results:[],pagination:{has_more:!1}});case 2:return e.abrupt("return",ae.diff(t.id,r.id,r.parents[0],n));case 3:case"end":return e.stop()}}),e)}))),[t.id,r.id,n]),s=a.results,i=a.loading,o=a.error,u=a.nextPage;return i?Object(me.jsx)(Ae,{}):o?Object(me.jsx)(De,{error:o}):Object(me.jsxs)("div",{className:"tree-container",children:[0===s.length?Object(me.jsx)(Ie.a,{variant:"info",children:"No changes"}):Object(me.jsx)(O.a,{children:Object(me.jsx)(O.a.Body,{children:Object(me.jsx)(Ne.a,{borderless:!0,size:"sm",children:Object(me.jsx)("tbody",{children:s.map((function(e){return Object(me.jsx)(Pt,{entry:e,showActions:!1},e.path)}))})})})}),Object(me.jsx)(Je,{onPaginate:c,nextPage:u,after:n})]})},Mt=function(e){var t=e.repo,r=e.commit,n="outline-dark";return Object(me.jsx)("div",{children:Object(me.jsxs)(At.a,{className:"commit-actions",children:[Object(me.jsx)(Ge,{buttonVariant:"outline-dark",href:{pathname:"/repositories/:repoId/objects",params:{repoId:t.id},query:{ref:r.id}},tooltip:"Browse commit objects",children:Object(me.jsx)(g.b,{})}),Object(me.jsx)(Ge,{buttonVariant:n,href:{pathname:"/repositories/:repoId/actions",params:{repoId:t.id},query:{commit:r.id}},tooltip:"View Commit Action runs",children:Object(me.jsx)(g.A,{})}),Object(me.jsx)(ze,{variant:n,text:r.id,tooltip:"Copy ID to clipboard"}),Object(me.jsx)(ze,{variant:n,text:"lakefs://".concat(t.id,"/").concat(r.id),tooltip:"Copy URI to clipboard",icon:Object(me.jsx)(g.x,{})}),Object(me.jsx)(ze,{variant:n,text:"s3://".concat(t.id,"/").concat(r.id),tooltip:"Copy S3 URI to clipboard",icon:Object(me.jsx)(g.y,{})})]})})},Kt=function(e){var t=e.commit;if(!t.metadata)return Object(me.jsx)(me.Fragment,{});var r=Object.getOwnPropertyNames(t.metadata);return 0===r.length?Object(me.jsx)(me.Fragment,{}):Object(me.jsx)(me.Fragment,{children:Object(me.jsxs)(Ne.a,{children:[Object(me.jsx)("thead",{children:Object(me.jsxs)("tr",{children:[Object(me.jsx)("th",{children:"Metadata Key"}),Object(me.jsx)("th",{children:"Value"})]})}),Object(me.jsx)("tbody",{children:r.map((function(e){return Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("code",{children:e})}),Object(me.jsx)("td",{children:Object(me.jsx)("code",{children:t.metadata[e]})})]},e)}))})]})})},Yt=function(e){var t=e.repoId,r=e.commitId;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/commits/:commitId",params:{repoId:t,commitId:r}},children:Object(me.jsx)("code",{children:r})}),Object(me.jsx)("br",{})]})},Jt=function(e){var t=e.repo,r=e.commit;return Object(me.jsx)(Ne.a,{size:"sm",borderless:!0,hover:!0,children:Object(me.jsxs)("tbody",{children:[Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"ID"})}),Object(me.jsx)("td",{children:Object(me.jsx)(Yt,{repoId:t.id,commitId:r.id})})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Committer"})}),Object(me.jsx)("td",{children:r.committer})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Creation Date"})}),Object(me.jsxs)("td",{children:[k.a.unix(r.creation_date).format("MM/DD/YYYY HH:mm:ss")," (",k.a.unix(r.creation_date).fromNow(),")"]})]}),r.parents?Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Parents"})}),Object(me.jsx)("td",{children:r.parents.map((function(e){return Object(me.jsx)(Yt,{repoId:t.id,commitId:e},e)}))})]}):Object(me.jsx)(me.Fragment,{})]})})},Wt=function(e){var t=e.repo,r=e.commitId,n=e.onPaginate,c=e.after,a=Oe(Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.get(t.id,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[t.id,r]),s=a.response,i=a.loading,o=a.error;if(i)return Object(me.jsx)(Ae,{});if(o)return Object(me.jsx)(De,{error:o});var u=s;return Object(me.jsxs)("div",{className:"mb-5 mt-3",children:[Object(me.jsx)(O.a,{children:Object(me.jsxs)(O.a.Body,{children:[Object(me.jsxs)("div",{className:"clearfix",children:[Object(me.jsx)("div",{className:"float-left",children:Object(me.jsx)(O.a.Title,{children:u.message})}),Object(me.jsx)("div",{className:"float-right",children:Object(me.jsx)(Mt,{repo:t,commit:u})})]}),Object(me.jsxs)("div",{className:"mt-4",children:[Object(me.jsx)(Jt,{repo:t,commit:u}),Object(me.jsx)(Kt,{commit:u})]})]})}),Object(me.jsx)("div",{className:"mt-4",children:Object(me.jsx)(Vt,{repo:t,commit:u,onPaginate:n,after:c})})]})},$t=function(){var e=de(),t=Ze(),r=t.repo,n=t.loading,c=t.error,a=e.query.after,s=e.params.commitId;return n?Object(me.jsx)(Ae,{}):c?Object(me.jsx)(De,{error:c}):Object(me.jsx)(Wt,{repo:r,after:a||"",commitId:s,onPaginate:function(t){return e.push({pathname:"/repositories/:repoId/commits/:commitId",params:{repoId:r.id,commitId:s},query:{after:t}})}})},Qt=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"commits",children:Object(me.jsx)($t,{})})})},Xt=function(e){var t=e.repo,r=e.commit,n="outline-dark";return Object(me.jsx)(Rt.a.Item,{children:Object(me.jsxs)("div",{className:"clearfix",children:[Object(me.jsxs)("div",{className:"float-left",children:[Object(me.jsx)("h6",{children:Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/commits/:commitId",params:{repoId:t.id,commitId:r.id}},children:r.message})}),Object(me.jsx)("p",{children:Object(me.jsxs)("small",{children:[Object(me.jsx)("strong",{children:r.committer})," committed at ",Object(me.jsx)("strong",{children:k.a.unix(r.creation_date).format("MM/DD/YYYY HH:mm:ss")})," (",k.a.unix(r.creation_date).fromNow(),")"]})})]}),Object(me.jsxs)("div",{className:"float-right",children:[Object(me.jsxs)(At.a,{className:"commit-actions",children:[Object(me.jsx)(Ge,{buttonVariant:"outline-dark",href:{pathname:"/repositories/:repoId/commits/:commitId",params:{repoId:t.id,commitId:r.id}},children:Object(me.jsx)("code",{children:r.id.substr(0,16)})}),Object(me.jsx)(Ge,{buttonVariant:n,href:{pathname:"/repositories/:repoId/actions",query:{commit:r.id},params:{repoId:t.id}},tooltip:"View Commit Action runs",children:Object(me.jsx)(g.A,{})}),Object(me.jsx)(ze,{variant:n,text:r.id,tooltip:"Copy ID to clipboard"}),Object(me.jsx)(ze,{variant:n,text:"lakefs://".concat(t.id,"/").concat(r.id),tooltip:"Copy URI to clipboard",icon:Object(me.jsx)(g.x,{})}),Object(me.jsx)(ze,{variant:n,text:"s3://".concat(t.id,"/").concat(r.id),tooltip:"Copy S3 URI to clipboard",icon:Object(me.jsx)(g.y,{})})]}),Object(me.jsx)("div",{className:"float-right ml-2",children:Object(me.jsx)(At.a,{className:"commit-actions",children:Object(me.jsx)(Ge,{buttonVariant:"outline-dark",href:{pathname:"/repositories/:repoId/objects",params:{repoId:t.id},query:{ref:r.id}},tooltip:"Browse objects at this commit",children:Object(me.jsx)(g.b,{})})})})]})]})})},Zt=function(e){var t=e.repo,r=e.reference,c=e.after,a=e.onPaginate,s=e.onSelectRef,i=Object(n.useState)(!0),o=Object(d.a)(i,2),u=o[0],b=o[1],h=he(Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ce.log(t.id,r.id,c));case 1:case"end":return e.stop()}}),e)}))),[t.id,r.id,u,c]),x=h.results,p=h.error,f=h.loading,m=h.nextPage;return f?Object(me.jsx)(Ae,{}):p?Object(me.jsx)(De,{error:p}):Object(me.jsxs)("div",{className:"mb-5",children:[Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(lt,{repo:t,selected:r||null,withCommits:!0,withWorkspace:!1,selectRef:s})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){b(!u)}})})]}),Object(me.jsx)(O.a,{children:Object(me.jsx)(Rt.a,{variant:"flush",children:x.map((function(e){return Object(me.jsx)(Xt,{repo:t,commit:e},e.id)}))})}),Object(me.jsx)(Je,{onPaginate:a,nextPage:m,after:c})]})},er=function(){var e=de(),t=e.query.after,r=Ze(),n=r.repo,c=r.reference,a=r.loading,s=r.error;if(a)return Object(me.jsx)(Ae,{});if(s)return Object(me.jsx)(De,{error:s});var i={repoId:n.id};return Object(me.jsx)(Zt,{repo:n,reference:c,onSelectRef:function(t){return e.push({pathname:"/repositories/:repoId/commits",query:{ref:t.id},params:i})},after:t||"",onPaginate:function(t){return e.push({pathname:"/repositories/:repoId/commits",query:{ref:c.id,after:t},params:i})}})},tr=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"commits",children:Object(me.jsx)(er,{})})})},rr=function(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/repositories/:repoId/commits",children:Object(me.jsx)(tr,{})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId/commits/:commitId",children:Object(me.jsx)(Qt,{})})]})},nr=function(e){var t=e.status,r=e.className,n=void 0===r?null:r,c=Object(me.jsx)(g.E,{fill:"orange",verticalAlign:"middle"});return"completed"===t?c=Object(me.jsx)(g.c,{fill:"green",verticalAlign:"middle"}):"failed"===t&&(c=Object(me.jsx)(g.I,{fill:"red",verticalAlign:"middle"})),Object(me.jsx)(Fe.a,{placement:"bottom",overlay:Object(me.jsx)(Se.a,{children:t}),children:Object(me.jsx)("span",{className:n,children:c})})},cr=function(e){var t=e.repo,r=e.run;return Object(me.jsx)(Ne.a,{size:"lg",children:Object(me.jsxs)("tbody",{children:[Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"ID"})}),Object(me.jsx)("td",{children:r.run_id})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Event Type"})}),Object(me.jsx)("td",{children:r.event_type})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Status"})}),Object(me.jsx)("td",{children:r.status})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Branch"})}),Object(me.jsx)("td",{children:r.branch?Object(me.jsx)(ve,{className:"mr-2",href:{pathname:"/repositories/:repoId/objects",params:{repoId:t.id},query:{ref:r.branch}},children:r.branch}):Object(me.jsx)(Re,{})})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Commit"})}),Object(me.jsx)("td",{children:r.commit_id?Object(me.jsx)(ve,{className:"mr-2",href:{pathname:"/repositories/:repoId/commits/:commitId",params:{repoId:t.id,commitId:r.commit_id}},children:Object(me.jsx)("code",{children:r.commit_id.substr(0,12)})}):Object(me.jsx)(Re,{})})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Start Time"})}),Object(me.jsx)("td",{children:r.start_time?Object(me.jsx)(qe,{dateValue:r.start_time}):Object(me.jsx)(Re,{})})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"End Time"})}),Object(me.jsx)("td",{children:r.end_time?Object(me.jsx)(qe,{dateValue:r.end_time}):Object(me.jsx)(Re,{})})]})]})})},ar=function(e){var t=e.repo,r=e.run,c=e.execution,a=Object(n.useState)(!1),s=Object(d.a)(a,2),i=s[0],o=s[1],u=Oe((function(){return i?oe.getRunHookOutput(t.id,r.run_id,c.hook_run_id):""}),[t.id,c.hook_id,c.hook_run_id,i]),j=u.response,l=u.loading,b=u.error,h=Object(me.jsx)(me.Fragment,{});i&&(h=l?Object(me.jsx)("pre",{children:"Loading..."}):b?Object(me.jsx)(De,{error:b}):Object(me.jsx)("pre",{children:j}));var x="(running)";if("completed"===c.status||"failed"===c.status){var O=k()(c.end_time),p=k()(c.start_time),f=k.a.duration(O.diff(p)).asSeconds();x="(".concat(c.status," in ").concat(f,"s)")}return Object(me.jsxs)("div",{className:"hook-log",children:[Object(me.jsxs)("p",{className:"mb-3 hook-log-title",children:[Object(me.jsx)(m.a,{variant:"link",onClick:function(){o(!i)},children:i?Object(me.jsx)(g.e,{size:"small"}):Object(me.jsx)(g.f,{size:"small"})})," ",Object(me.jsx)(nr,{status:c.status})," ",c.hook_id,Object(me.jsx)("small",{children:x})]}),Object(me.jsx)("div",{className:"hook-log-content",children:h})]})},sr=function(e){var t=e.repo,r=e.run,n=e.executions;return Object(me.jsx)("div",{className:"hook-logs",children:n.map((function(e){return Object(me.jsx)(ar,{repo:t,run:r,execution:e},"".concat(e.hook_id,"-").concat(e.hook_run_id))}))})},ir=function(e){var t=e.repo,r=e.run,n=e.hooks,c=e.onSelectAction,a=e.selectedAction,s=void 0===a?null:a,i=n.results,o={};i.forEach((function(e){o[e.action]=!0}));var u=Object.getOwnPropertyNames(o).sort(),j=Object(me.jsx)(cr,{repo:t,run:r});if(null!==s){var l=i.filter((function(e){return e.action===s})).sort((function(e,t){return e.hook_run_id>t.hook_run_id?1:e.hook_run_id<t.hook_run_id?-1:0}));j=Object(me.jsx)(sr,{run:r,repo:t,executions:l})}return Object(me.jsxs)(h.a,{className:"mt-3",children:[Object(me.jsxs)(x.a,{md:{span:3},children:[Object(me.jsx)(Rt.a,{variant:"flush",children:Object(me.jsxs)(Rt.a.Item,{action:!0,active:!s,onClick:function(){return c(null)},children:[Object(me.jsx)(g.w,{})," Summary"]})}),Object(me.jsxs)("div",{className:"mt-3",children:[Object(me.jsx)("h6",{children:"Actions"}),Object(me.jsx)(Rt.a,{children:u.map((function(e){return Object(me.jsxs)(Rt.a.Item,{action:!0,active:s===e,onClick:function(){return c(e)},children:[Object(me.jsx)(g.A,{})," ",e]},e)}))})]})]}),Object(me.jsx)(x.a,{md:{span:9},children:j})]})},or=function(e){var t=e.repo,r=e.runId,n=e.onSelectAction,c=e.selectedAction,a=Oe(Object(l.a)(j.a.mark((function e(){var n,c,a,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([oe.getRun(t.id,r),oe.listRunHooks(t.id,r)]);case 2:return n=e.sent,c=Object(d.a)(n,2),a=c[0],s=c[1],e.abrupt("return",{run:a,hooks:s});case 7:case"end":return e.stop()}}),e)}))),[t.id,r]),s=a.response,i=a.error;return a.loading?Object(me.jsx)(Ae,{}):i?Object(me.jsx)(De,{error:i}):Object(me.jsx)(ir,{repo:t,run:s.run,hooks:s.hooks,onSelectAction:n,selectedAction:c})},ur=function(){var e=de(),t=e.query.action,r=e.params.runId,n=Ze(),c=n.loading,a=n.error,s=n.repo;if(c)return Object(me.jsx)(Ae,{});if(a)return Object(me.jsx)(De,{error:a});var i={repoId:s.id,runId:r};return Object(me.jsx)(or,{repo:s,runId:r,selectedAction:t||null,onSelectAction:function(t){var r={};t&&(r.action=t),e.push({pathname:"/repositories/:repoId/actions/:runId",query:r,params:i})}})},jr=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"actions",fluid:!0,children:Object(me.jsx)(ur,{})})})},lr=function(e){var t=e.repo,r=e.run,n=e.onFilterBranch,c=e.onFilterCommit;return Object(me.jsxs)("tr",{children:[Object(me.jsxs)("td",{children:[Object(me.jsx)(nr,{className:"mr-2",status:r.status})," ",Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/actions/:runId",params:{repoId:t.id,runId:r.run_id}},children:r.run_id})]}),Object(me.jsx)("td",{children:r.event_type}),Object(me.jsxs)("td",{children:[Object(me.jsx)(ve,{className:"mr-2",href:{pathname:"/repositories/:repoId/objects",params:{repoId:t.id},query:{ref:r.branch}},children:r.branch}),Object(me.jsx)(Be,{onClick:function(){return n(r.branch)},variant:"link",tooltip:"filter by branch",className:"row-hover",size:"sm",children:Object(me.jsx)(g.p,{size:"small"})})]}),Object(me.jsx)("td",{children:Object(me.jsx)(qe,{dateValue:r.start_time})}),Object(me.jsx)("td",{children:r.end_time?Object(me.jsx)(qe,{dateValue:r.end_time}):Object(me.jsx)(Re,{})}),Object(me.jsx)("td",{children:r.commit_id?Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(ve,{className:"mr-2",href:{pathname:"/repositories/:repoId/commits/:commitId",params:{repoId:t.id,commitId:r.commit_id}},children:Object(me.jsx)("code",{children:r.commit_id.substr(0,12)})}),Object(me.jsx)(Be,{onClick:function(){return c(r.commit_id)},variant:"link",tooltip:"filter by commit ID",className:"row-hover",size:"sm",children:Object(me.jsx)(g.p,{size:"small"})})]}):Object(me.jsx)(Re,{})})]})},dr=function(e){var t=e.repo,r=e.runs,n=e.nextPage,c=e.after,a=e.onPaginate,s=e.onFilterBranch,i=e.onFilterCommit;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(Ne.a,{children:[Object(me.jsx)("thead",{children:Object(me.jsxs)("tr",{children:[Object(me.jsx)("th",{children:"Run ID"}),Object(me.jsx)("th",{children:"Event"}),Object(me.jsx)("th",{children:"Branch"}),Object(me.jsx)("th",{children:"Start Time"}),Object(me.jsx)("th",{children:"End Time"}),Object(me.jsx)("th",{children:"Commit ID"})]})}),Object(me.jsx)("tbody",{children:r.map((function(e){return Object(me.jsx)(lr,{repo:t,run:e,onFilterBranch:s,onFilterCommit:i},e.run_id)}))})]}),Object(me.jsx)(Je,{onPaginate:a,after:c,nextPage:n})]})},br=function(e){var t,r=e.repo,c=e.after,a=e.onPaginate,s=e.branch,i=e.commit,o=e.onFilterBranch,u=e.onFilterCommit,b=Object(n.useState)(!1),h=Object(d.a)(b,2),x=h[0],O=h[1],p=he(Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe.listRuns(r.id,s,i,c);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),[r.id,c,x,s,i]),f=p.results,m=p.loading,v=p.error,y=p.nextPage;t=v?Object(me.jsx)(De,{error:v}):m?Object(me.jsx)(Ae,{}):Object(me.jsx)(dr,{repo:r,runs:f,nextPage:y,after:c,onPaginate:a,onFilterCommit:u,onFilterBranch:o});var k=[];return s&&(k=[Object(me.jsxs)(Be,{variant:"light",tooltip:"remove branch filter",onClick:function(){return o("")},children:[Object(me.jsx)(g.J,{})," ",s]},"branch")]),i&&(k=[].concat(Object(S.a)(k),[Object(me.jsxs)(Be,{variant:"light",tooltip:"remove commit filter",onClick:function(){return u("")},children:[Object(me.jsx)(g.J,{}),"  ",i.substr(0,12)]},"commit")])),Object(me.jsxs)("div",{className:"mb-5",children:[Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:k}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return O(!x)}})})]}),t]})},hr=function(){var e=de(),t=e.query.after,r=e.query.commit?e.query.commit:"",n=e.query.branch?e.query.branch:"",c=Ze(),a=c.repo,s=c.loading,i=c.error;if(s)return Object(me.jsx)(Ae,{});if(i)return Object(me.jsx)(De,{error:i});var o={repoId:a.id};return Object(me.jsx)(br,{repo:a,after:t,onPaginate:function(t){var c={after:t};r&&(c.commit=r),n&&(c.branch=n),e.push({pathname:"/repositories/:repoId/actions",query:c,params:o})},branch:n,commit:r,onFilterBranch:function(t){var r={};t&&(r.branch=t),e.push({pathname:"/repositories/:repoId/actions",query:r,params:o})},onFilterCommit:function(t){var r={};t&&(r.commit=t),e.push({pathname:"/repositories/:repoId/actions",query:r,params:o})}})},xr=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"actions",children:Object(me.jsx)(hr,{})})})},Or=function(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/repositories/:repoId/actions",children:Object(me.jsx)(xr,{})}),Object(me.jsx)(o.b,{exact:!0,path:"/repositories/:repoId/actions/:runId",children:Object(me.jsx)(jr,{})})]})},pr=function(e){var t=e.repo,r=e.show,c=e.onSubmit,a=e.onCancel,s=Object(n.useState)(!0),i=Object(d.a)(s,2),o=i[0],u=i[1],j=Object(n.useRef)(null);return Object(me.jsxs)(v.a,{show:r,onHide:a,size:"lg",children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsx)(v.a.Title,{children:"Delete Repository"})}),Object(me.jsxs)(v.a.Body,{children:["Are you sure you wish to delete repository ",Object(me.jsx)("strong",{children:t.id}),"? ",Object(me.jsx)("br",{}),"This action cannot be undone. This will delete the following: ",Object(me.jsx)("br",{})," ",Object(me.jsx)("br",{}),Object(me.jsxs)("ul",{children:[Object(me.jsx)("li",{children:"All commits"}),Object(me.jsx)("li",{children:"All branches"}),Object(me.jsx)("li",{children:"All tags"}),Object(me.jsx)("li",{children:"All repository configuration"})]}),"Data in the underlying object store will not be deleted by this action. ",Object(me.jsx)("br",{})," ",Object(me.jsx)("br",{}),"Please type ",Object(me.jsx)("strong",{children:t.id})," to confirm: ",Object(me.jsx)("br",{}),Object(me.jsx)(b.a.Control,{className:"mt-2",placeholder:"Enter repository name to confirm",type:"text",autoFocus:!0,ref:j,onChange:function(){u(j.current.value!==t.id)}})]}),Object(me.jsx)(v.a.Footer,{children:Object(me.jsx)(m.a,{disabled:o,variant:"danger",onClick:c,children:"I understand the consequences, delete this repository"})})]})},fr=function(){var e=de(),t=Ze(),r=t.repo,c=t.loading,a=t.error,s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)(null),l=Object(d.a)(j,2),O=l[0],p=l[1];return c?Object(me.jsx)(Ae,{}):a?Object(me.jsx)(De,{error:a}):O?Object(me.jsx)(De,{error:O}):Object(me.jsxs)("div",{className:"mt-3 mb-5",children:[Object(me.jsx)("div",{className:"section-title",children:Object(me.jsx)("h4",{children:"General"})}),Object(me.jsxs)(We.a,{children:[Object(me.jsxs)(h.a,{children:[Object(me.jsx)(b.a.Label,{column:!0,md:{span:2},className:"mb-3",children:"Repository name"}),Object(me.jsx)(x.a,{md:{span:4},children:Object(me.jsx)(b.a.Control,{readOnly:!0,value:r.id,type:"text"})})]}),Object(me.jsxs)(h.a,{children:[Object(me.jsx)(b.a.Label,{column:!0,md:{span:2},className:"mb-3",children:"Storage namespace"}),Object(me.jsx)(x.a,{md:{span:4},children:Object(me.jsx)(b.a.Control,{readOnly:!0,value:r.storage_namespace,type:"text"})})]}),Object(me.jsxs)(h.a,{children:[Object(me.jsx)(b.a.Label,{column:!0,md:{span:2},className:"mb-3",children:"Default branch"}),Object(me.jsx)(x.a,{md:{span:4},children:Object(me.jsx)(b.a.Control,{readOnly:!0,value:r.default_branch,type:"text"})})]})]}),Object(me.jsxs)(m.a,{variant:"danger",className:"mt-3",onClick:function(){return u(!o)},children:[Object(me.jsx)(g.G,{})," Delete this repository"]}),Object(me.jsx)(pr,{repo:r,onCancel:function(){u(!1)},onSubmit:function(){te.delete(r.id).catch((function(e){p(e)})).then((function(){return e.push("/repositories")}))},show:o})]})},mr=function(){return Object(me.jsx)(tt,{children:Object(me.jsx)(ct,{activePage:"settings",children:Object(me.jsx)(fr,{})})})},vr=function(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/",children:Object(me.jsx)(o.a,{to:"/repositories"})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId/objects",children:Object(me.jsx)(It,{})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId/changes",children:Object(me.jsx)(Tt,{})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId/commits",children:Object(me.jsx)(rr,{})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId/branches",children:Object(me.jsx)(Gt,{})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId/compare",children:Object(me.jsx)(Lt,{})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId/actions",children:Object(me.jsx)(Or,{})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId/settings",children:Object(me.jsx)(mr,{})})]})},gr=function(e){var t=e.show,r=e.error,n=e.onSubmit,c=e.onCancel,a=Oe((function(){return ue.get()})),s=a.response,i=a.error,o=r||i;return a.loading?Object(me.jsxs)(v.a,{show:t,onHide:c,size:"lg",children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsx)(v.a.Title,{children:"Create A New Repository"})}),Object(me.jsx)(v.a.Body,{children:Object(me.jsx)(Ae,{})})]}):Object(me.jsxs)(v.a,{show:t,onHide:c,size:"lg",children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsx)(v.a.Title,{children:"Create A New Repository"})}),Object(me.jsx)(v.a.Body,{children:Object(me.jsx)(Ye,{config:s,error:o,onSubmit:n,onCancel:c})})]})},yr=function(e){var t=e.onPaginate,r=e.prefix,n=e.after,c=e.refresh,a=he((function(){return te.list(r,n)}),[c,r,n]),s=a.results,i=a.loading,o=a.error,u=a.nextPage;return i?Object(me.jsx)(Ae,{}):o?Object(me.jsx)(De,{error:o}):Object(me.jsxs)("div",{children:[s.map((function(e){return Object(me.jsx)(h.a,{children:Object(me.jsx)(x.a,{className:"mb-2 mt-2",children:Object(me.jsx)(O.a,{children:Object(me.jsxs)(O.a.Body,{children:[Object(me.jsx)("h5",{children:Object(me.jsx)(ve,{href:{pathname:"/repositories/:repoId/objects",params:{repoId:e.id}},children:e.id})}),Object(me.jsx)("p",{children:Object(me.jsxs)("small",{children:["created at ",Object(me.jsx)("code",{children:y.unix(e.creation_date).toISOString()})," (",y.unix(e.creation_date).fromNow(),")",Object(me.jsx)("br",{}),"default branch: ",Object(me.jsx)("code",{children:e.default_branch}),","," ","storage namespace: ",Object(me.jsx)("code",{children:e.storage_namespace})]})})]})})})},e.id)})),Object(me.jsx)(Je,{after:n,nextPage:u,onPaginate:t})]})},kr=function(){var e=de(),t=Object(n.useState)(!1),r=Object(d.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(null),i=Object(d.a)(s,2),o=i[0],u=i[1],h=Object(n.useState)(!1),O=Object(d.a)(h,2),v=O[0],y=O[1],k=e.query.prefix?e.query.prefix:"",w=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,c=Object(n.useState)(e),a=Object(d.a)(c,2),s=a[0],i=a[1];Object(n.useEffect)((function(){return i(e)}),[e]);var o=Ee(t,r);return[s,function(e){i(e),o(e)}]}(k,(function(t){return e.push({pathname:"/repositories",query:{prefix:t}})})),C=Object(d.a)(w,2),I=C[0],S=C[1],P=function(){var t=Object(l.a)(j.a.mark((function t(r){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te.create(r);case 3:y(!v),u(null),e.push({pathname:"/repositories/:repoId/objects",params:{repoId:r.name}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),u(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}();return Object(me.jsx)(Ce,{children:Object(me.jsxs)(We.a,{fluid:"xl",className:"mt-3",children:[Object(me.jsxs)(Ue,{children:[Object(me.jsx)(b.a,{className:"float-left",style:{minWidth:300},onSubmit:function(e){e.preventDefault()},children:Object(me.jsx)(b.a.Row,{children:Object(me.jsx)(x.a,{children:Object(me.jsxs)(p.a,{children:[Object(me.jsx)(p.a.Prepend,{children:Object(me.jsx)(p.a.Text,{children:Object(me.jsx)(g.D,{})})}),Object(me.jsx)(b.a.Control,{placeholder:"Find a repository...",autoFocus:!0,value:I,onChange:function(e){return S(e.target.value)}})]})})})}),Object(me.jsx)(f.a,{className:"justify-content-end mb-2",children:Object(me.jsxs)(m.a,{variant:"success",onClick:function(){a(!0),u(null)},children:[Object(me.jsx)(g.C,{})," Create Repository"]})})]}),Object(me.jsx)(yr,{prefix:k,refresh:v,after:e.query.after?e.query.after:"",onPaginate:function(t){var r={after:t};e.query.prefix&&(r.prefix=e.query.prefix),e.push({pathname:"/repositories",query:r})}}),Object(me.jsx)(gr,{onCancel:function(){return a(!1)},show:c,error:o,onSubmit:function(e){return P(e)}})]})})},wr=function(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/repositories",children:Object(me.jsx)(kr,{})}),Object(me.jsx)(o.b,{path:"/repositories/:repoId",children:Object(me.jsx)(vr,{})})]})},Cr=function(e){var t=e.children,r=e.activeTab;return Object(me.jsx)(Ce,{children:Object(me.jsx)(We.a,{fluid:"xl",children:Object(me.jsxs)(h.a,{className:"mt-5",children:[Object(me.jsx)(x.a,{md:{span:3},children:Object(me.jsxs)(O.a,{children:[Object(me.jsx)(O.a.Header,{children:Object(me.jsx)(O.a.Title,{children:"Access Control"})}),Object(me.jsxs)(O.a.Body,{children:[Object(me.jsx)(C.a,{variant:"pills",className:"flex-column",children:Object(me.jsx)(ve,{component:C.a.Link,href:"/auth/credentials",active:"credentials"===r,children:"My Credentials"})}),Object(me.jsx)("hr",{}),Object(me.jsxs)(C.a,{variant:"pills",className:"flex-column",children:[Object(me.jsx)(ve,{component:C.a.Link,href:"/auth/users",active:"users"===r,children:"Users"}),Object(me.jsx)(ve,{component:C.a.Link,href:"/auth/groups",active:"groups"===r,children:"Groups"}),Object(me.jsx)(ve,{component:C.a.Link,href:"/auth/policies",active:"policies"===r,children:"Policies"})]})]})]})}),Object(me.jsx)(x.a,{md:{span:9},children:t})]})})})},Ir=function(e){var t=e.userId,r=e.currentAccessKey,c=e.refresh,a=e.after,s=e.onPaginate,i=Object(n.useState)(!1),o=Object(d.a)(i,2),u=o[0],j=o[1],l=Object(n.useState)(null),b=Object(d.a)(l,2),h=b[0],x=b[1],O=he((function(){return ie.listCredentials(t,a)}),[c,u,t,a]),p=O.results,f=O.error,m=O.loading,v=O.nextPage;return f?Object(me.jsx)(De,{error:f}):h?Object(me.jsx)(De,{error:h}):m?Object(me.jsx)(Ae,{}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Ve,{keyFn:function(e){return e.access_key_id},emptyState:"No credentials found",results:p,headers:["Access Key ID","Creation Date",""],rowFn:function(e){return[Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)("code",{children:e.access_key_id}),r===e.access_key_id&&Object(me.jsxs)("strong",{children:[" ","(current)"]})]}),Object(me.jsx)(qe,{dateValue:e.creation_date}),Object(me.jsx)("span",{className:"row-hover",children:r!==e.access_key_id&&Object(me.jsx)(ht,{variant:"outline-danger",size:"sm",msg:Object(me.jsxs)("span",{children:["Are you sure you'd like to delete access key ",Object(me.jsx)("code",{children:e.access_key_id}),"?"]}),onConfirm:function(){ie.deleteCredentials(t,e.access_key_id).catch((function(e){return x(e)})).then((function(){return j(!u)}))},children:"Revoke"})})]}}),Object(me.jsx)(Je,{onPaginate:s,after:a,nextPage:v})]})},Sr=function(e){var t=e.credentials,r=e.show,n=e.onHide;return t?Object(me.jsxs)(v.a,{show:r,onHide:n,size:"lg",children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsx)(v.a.Title,{children:"Create Access Key"})}),Object(me.jsxs)(v.a.Body,{children:[Object(me.jsx)(Ne.a,{children:Object(me.jsxs)("tbody",{children:[Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Access Key ID"})}),Object(me.jsx)("td",{children:Object(me.jsx)("code",{children:t.access_key_id})}),Object(me.jsx)("td",{children:Object(me.jsx)(ze,{variant:"outline-dark",tooltip:"Copy to clipboard",text:t.access_key_id})})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("strong",{children:"Secret Access Key"})}),Object(me.jsx)("td",{children:Object(me.jsx)("code",{children:t.secret_access_key})}),Object(me.jsx)("td",{children:Object(me.jsx)(ze,{variant:"outline-dark",tooltip:"Copy to clipboard",text:t.secret_access_key})})]})]})}),Object(me.jsx)(Ie.a,{variant:"warning",className:"mt-3",children:"Copy the Secret Access Key and store it somewhere safe. You will not be able to access it again."})]})]}):Object(me.jsx)(me.Fragment,{})},Pr=function(){var e=de(),t=pe().user,r=t?t.id:"",c=Object(n.useState)(!1),a=Object(d.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(null),u=Object(d.a)(o,2),j=u[0],l=u[1],b=Object(n.useState)(null),h=Object(d.a)(b,2),x=h[0],O=h[1],p=e.query.after;return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(ht,{variant:"success",modalVariant:"success",msg:Object(me.jsxs)("span",{children:["Create a new Access Key for user ",Object(me.jsx)("strong",{children:r}),"?"]}),onConfirm:function(e){ie.createCredentials(t.id).catch((function(e){l(e)})).then((function(e){return l(null),i(!s),e})).then((function(e){O(e)})).finally(e)},children:"Create Access Key"})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return i(!s)}})})]}),!!j&&Object(me.jsx)(De,{error:j}),Object(me.jsx)(Sr,{credentials:x,show:!!x,onHide:function(){O(null)}}),!!t&&Object(me.jsx)(Ir,{userId:t.id,currentAccessKey:t.accessKeyId,refresh:s,after:p||"",onPaginate:function(t){return e.push({pathname:"/auth/credentials",query:{after:t}})}})]})},Nr=function(){return Object(me.jsx)(Cr,{activeTab:"credentials",children:Object(me.jsx)(Pr,{})})},Fr=r(107),_r=function(e){var t=e.show,r=e.searchFn,c=e.onAttach,a=e.onHide,s=e.addText,i=void 0===s?"Add":s,o=e.emptyState,u=void 0===o?"No matches":o,j=e.modalTitle,l=void 0===j?"Add":j,h=e.filterPlaceholder,x=void 0===h?"Filter...":h,O=Object(n.useRef)(null),f=Object(n.useState)(""),y=Object(d.a)(f,2),k=y[0],w=y[1],C=Object(n.useState)([]),I=Object(d.a)(C,2),P=I[0],N=I[1];Object(n.useEffect)((function(){O.current&&""===O.current.value&&O.current.focus()}));var F,_=Oe((function(){return r(k)}),[k]),E=_.response,T=_.error;return F=_.loading?Object(me.jsx)(Ae,{}):T?Object(me.jsx)(De,{error:T}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Ve,{headers:["Select","ID"],keyFn:function(e){return e.id},emptyState:u,results:E,rowFn:function(e){return[Object(me.jsx)(Me,{defaultChecked:P.indexOf(e.id)>=0,onAdd:function(){return N([].concat(Object(S.a)(P),[e.id]))},onRemove:function(){return N(P.filter((function(t){return t!==e.id})))},name:"selected"}),Object(me.jsx)("strong",{children:e.id})]}}),Object(me.jsx)("div",{className:"mt-3",children:P.length>0&&Object(me.jsxs)("p",{children:[Object(me.jsx)("strong",{children:"Selected: "}),P.map((function(e){return Object(me.jsx)(at.a,{pill:!0,variant:"primary",className:"mr-1",children:e},e)}))]})})]}),Object(me.jsxs)(v.a,{show:t,onHide:a,children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsx)(v.a.Title,{children:l})}),Object(me.jsxs)(v.a.Body,{children:[Object(me.jsx)(b.a,{onSubmit:function(e){e.preventDefault()},children:Object(me.jsxs)(p.a,{children:[Object(me.jsx)(p.a.Prepend,{children:Object(me.jsx)(p.a.Text,{children:Object(me.jsx)(g.D,{})})}),Object(me.jsx)(Te,{ref:O,placeholder:x,onChange:function(){w(O.current.value)}})]})}),Object(me.jsx)("div",{className:"mt-2",children:F})]}),Object(me.jsxs)(v.a.Footer,{children:[Object(me.jsx)(m.a,{variant:"success",disabled:0===P.length,onClick:function(){c(P)},children:i}),Object(me.jsx)(m.a,{variant:"secondary",onClick:a,children:"Cancel"})]})]})},Er=function(e){var t=e.show,r=e.onHide,c=e.onCreate,a=e.title,s=e.idPlaceholder,i=Object(n.useState)(null),o=Object(d.a)(i,2),u=o[0],j=o[1],l=Object(n.useRef)(null);Object(n.useEffect)((function(){l.current&&""===l.current.value&&l.current.focus()}));var h=function(){c(l.current.value).catch((function(e){return j(e)}))};return Object(me.jsxs)(v.a,{show:t,onHide:r,children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsx)(v.a.Title,{children:a})}),Object(me.jsxs)(v.a.Body,{children:[Object(me.jsx)(b.a,{onSubmit:function(e){e.preventDefault(),h()},children:Object(me.jsx)(Fr.a,{ref:l,autoFocus:!0,placeholder:s,type:"text"})}),!!u&&Object(me.jsx)(De,{className:"mt-3",error:u})]}),Object(me.jsxs)(v.a.Footer,{children:[Object(me.jsx)(m.a,{onClick:h,variant:"success",children:"Create"}),Object(me.jsx)(m.a,{onClick:r,variant:"secondary",children:"Cancel"})]})]})},Tr=r(108),Ar=function(e){var t=e.userId,r=e.page,n=void 0===r?"groups":r;return Object(me.jsxs)(C.a,{justify:!0,variant:"tabs",children:[Object(me.jsx)(ve,{component:ge,active:"groups"===n,href:{pathname:"/auth/users/:userId/groups",params:{userId:t}},children:"Group Memberships"}),Object(me.jsx)(ve,{component:ge,active:"policies"===n,href:{pathname:"/auth/users/:userId/policies",params:{userId:t}},children:"Directly Attached Policies"}),Object(me.jsx)(ve,{component:ge,active:"effectivePolicies"===n,href:{pathname:"/auth/users/:userId/policies/effective",params:{userId:t}},children:"Effective Attached Policies"}),Object(me.jsx)(ve,{component:ge,active:"credentials"===n,href:{pathname:"/auth/users/:userId/credentials",params:{userId:t}},children:"Access Credentials"})]})},Rr=function(e){var t=e.groupId,r=e.page,n=void 0===r?"groups":r;return Object(me.jsxs)(C.a,{justify:!0,variant:"tabs",children:[Object(me.jsx)(ve,{component:ge,active:"members"===n,href:{pathname:"/auth/groups/:groupId/members",params:{groupId:t}},children:"Group Memberships"}),Object(me.jsx)(ve,{component:ge,active:"policies"===n,href:{pathname:"/auth/groups/:groupId/policies",params:{groupId:t}},children:"Attached Policies"})]})},Dr=function(e){var t=e.userId,r=e.page;return Object(me.jsxs)("div",{className:"mb-4",children:[Object(me.jsxs)($e.a,{children:[Object(me.jsx)(ve,{component:Tr.a,href:"/auth/users",children:"Users"}),Object(me.jsx)(ve,{component:Tr.a,href:{pathname:"/auth/users/:userId",params:{userId:t}},children:t})]}),Object(me.jsx)(Ar,{userId:t,page:r})]})},qr=function(e){var t=e.groupId,r=e.page;return Object(me.jsxs)("div",{className:"mb-4",children:[Object(me.jsxs)($e.a,{children:[Object(me.jsx)(ve,{component:Tr.a,href:"/auth/groups",children:"Groups"}),Object(me.jsx)(ve,{component:Tr.a,href:{pathname:"/auth/groups/:groupId",params:{groupId:t}},children:t})]}),Object(me.jsx)(Rr,{groupId:t,page:r})]})},Hr=function(e){var t=e.policyId;return Object(me.jsx)("div",{className:"mb-4",children:Object(me.jsxs)($e.a,{children:[Object(me.jsx)(ve,{component:Tr.a,href:"/auth/policies",children:"Policies"}),Object(me.jsx)(ve,{component:Tr.a,href:{pathname:"/auth/policies/:policyId",params:{policyId:t}},children:t})]})})},Ur=function(e){var t,r=e.groupId,c=e.after,a=e.onPaginate,s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)(!1),l=Object(d.a)(j,2),b=l[0],h=l[1],x=Object(n.useState)(null),O=Object(d.a)(x,2),p=O[0],f=O[1],v=he((function(){return ie.listGroupMembers(r,c)}),[r,c,o]),g=v.results,y=v.loading,k=v.error,w=v.nextPage;return Object(n.useEffect)((function(){f(null)}),[o]),t=y?Object(me.jsx)(Ae,{}):k?Object(me.jsx)(De,{error:k}):Object(me.jsxs)(me.Fragment,{children:[p&&Object(me.jsx)(De,{error:p}),Object(me.jsx)(Ve,{keyFn:function(e){return e.id},rowFn:function(e){return[Object(me.jsx)(ve,{href:{pathname:"/auth/users/:userId",params:{userId:e.id}},children:e.id}),Object(me.jsx)(qe,{dateValue:e.creation_date})]},headers:["User ID","Created At"],actions:[{key:"Remove",buttonFn:function(e){return Object(me.jsx)(ht,{size:"sm",variant:"outline-danger",msg:Object(me.jsxs)("span",{children:["Are you sure you'd like to remove user ",Object(me.jsx)("strong",{children:e.id})," from group ",Object(me.jsx)("strong",{children:r}),"?"]}),onConfirm:function(){ie.removeUserFromGroup(e.id,r).catch((function(e){return alert(e)})).then((function(){u(!o)}))},children:"Remove"})}}],results:g,emptyState:"No users found"}),Object(me.jsx)(Je,{onPaginate:a,after:c,nextPage:w}),b&&Object(me.jsx)(_r,{show:b,emptyState:"No users found",filterPlaceholder:"Find User...",modalTitle:"Add to Group",addText:"Add to Group",searchFn:function(e){return ie.listUsers(e,"",5).then((function(e){return e.results}))},onHide:function(){return h(!1)},onAttach:function(e){Promise.all(e.map((function(e){return ie.addUserToGroup(e,r)}))).then((function(){u(!o),f(null)})).catch((function(e){f(e)})).finally((function(){h(!1)}))}})]}),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(qr,{groupId:r,page:"members"}),Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(m.a,{variant:"success",onClick:function(){return h(!0)},children:"Add Members"})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return u(!o)}})})]}),Object(me.jsx)("div",{className:"mt-2",children:t})]})},Gr=function(){var e=de(),t=e.query.after,r=e.params.groupId;return r&&Object(me.jsx)(Ur,{groupId:r,after:t||"",onPaginate:function(t){return e.push({pathname:"/auth/groups/:groupId/members",params:{groupId:r},query:{after:t}})}})},Br=function(){return Object(me.jsx)(Cr,{activeTab:"groups",children:Object(me.jsx)(Gr,{})})},zr=function(e){var t,r=e.groupId,c=e.after,a=e.onPaginate,s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)(!1),l=Object(d.a)(j,2),b=l[0],h=l[1],x=Object(n.useState)(null),O=Object(d.a)(x,2),p=O[0],f=O[1],v=he((function(){return ie.listGroupPolicies(r,c)}),[r,c,o]),g=v.results,y=v.loading,k=v.error,w=v.nextPage;return Object(n.useEffect)((function(){f(null)}),[o,c]),t=y?Object(me.jsx)(Ae,{}):k?Object(me.jsx)(De,{error:k}):Object(me.jsxs)(me.Fragment,{children:[p&&Object(me.jsx)(De,{error:p}),Object(me.jsx)(Ve,{keyFn:function(e){return e.id},rowFn:function(e){return[Object(me.jsx)(ve,{href:{pathname:"/auth/policies/:policyId",params:{policyId:e.id}},children:e.id}),Object(me.jsx)(qe,{dateValue:e.creation_date})]},headers:["Policy ID","Created At"],actions:[{key:"Detach",buttonFn:function(e){return Object(me.jsx)(ht,{size:"sm",variant:"outline-danger",modalVariant:"danger",msg:Object(me.jsxs)("span",{children:["Are you sure you'd like to detach policy ",Object(me.jsx)("strong",{children:e.id}),"?"]}),onConfirm:function(){ie.detachPolicyFromGroup(r,e.id).catch((function(e){return alert(e)})).then((function(){u(!o)}))},children:"Remove"})}}],results:g,emptyState:"No policies found"}),Object(me.jsx)(Je,{onPaginate:a,after:c,nextPage:w}),b&&Object(me.jsx)(_r,{show:b,emptyState:"No policies found",filterPlaceholder:"Find Policy...",modalTitle:"Attach Policies",addText:"Attach Policies",searchFn:function(e){return ie.listPolicies(e,"",5).then((function(e){return e.results}))},onHide:function(){return h(!1)},onAttach:function(e){Promise.all(e.map((function(e){return ie.attachPolicyToGroup(r,e)}))).then((function(){u(!o),f(null)})).catch((function(e){f(e)})).finally((function(){h(!1)}))}})]}),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(qr,{groupId:r,page:"policies"}),Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(m.a,{variant:"success",onClick:function(){return h(!0)},children:"Attach Policy"})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return u(!o)}})})]}),Object(me.jsx)("div",{className:"mt-2",children:t})]})},Lr=function(){var e=de(),t=e.query.after,r=e.params.groupId;return r?Object(me.jsx)(zr,{groupId:r,after:t||"",onPaginate:function(t){return e.push({pathname:"/auth/groups/:groupId/policies",params:{groupId:r},query:{after:t}})}}):Object(me.jsx)(me.Fragment,{})},Vr=function(){return Object(me.jsx)(Cr,{activeTab:"groups",children:Object(me.jsx)(Lr,{})})},Mr=function(e){var t=e.subPath,r=de().params.groupId;return Object(me.jsx)(o.a,{to:"/auth/groups/".concat(r).concat(t)})};function Kr(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/auth/groups/:groupId",children:Object(me.jsx)(Mr,{subPath:"/members"})}),Object(me.jsx)(o.b,{path:"/auth/groups/:groupId/members",children:Object(me.jsx)(Br,{})}),Object(me.jsx)(o.b,{path:"/auth/groups/:groupId/policies",children:Object(me.jsx)(Vr,{})})]})}var Yr=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(null),s=Object(d.a)(a,2),i=s[0],o=s[1],u=Object(n.useState)(!1),j=Object(d.a)(u,2),l=j[0],b=j[1],h=Object(n.useState)(!1),x=Object(d.a)(h,2),O=x[0],p=x[1],f=de(),v=f.query.after?f.query.after:"",g=he((function(){return ie.listGroups(v)}),[v,O]),y=g.results,k=g.loading,w=g.error,C=g.nextPage;return Object(n.useEffect)((function(){c([])}),[v,O]),w?Object(me.jsx)(De,{error:w}):k?Object(me.jsx)(Ae,{}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(Ue,{children:[Object(me.jsxs)(He,{orientation:"left",children:[Object(me.jsx)(m.a,{variant:"success",onClick:function(){return b(!0)},children:"Create Group"}),Object(me.jsx)(ht,{onConfirm:function(){ie.deleteGroups(r.map((function(e){return e.id}))).catch((function(e){return o(e)})).then((function(){c([]),p(!O)}))},disabled:0===r.length,variant:"danger",msg:"Are you sure you'd like to delete ".concat(r.length," groups?"),children:"Delete Selected"})]}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return p(!O)}})})]}),!!i&&Object(me.jsx)(De,{error:i}),Object(me.jsx)(Er,{show:l,onHide:function(){return b(!1)},onCreate:function(e){return ie.createGroup(e).then((function(){c([]),b(!1),p(!O)}))},title:"Create Group",idPlaceholder:"Group Name (e.g. 'DataTeam')"}),Object(me.jsx)(Ve,{results:y,headers:["","Group ID","Created At"],keyFn:function(e){return e.id},rowFn:function(e){return[Object(me.jsx)(Me,{name:e.id,onAdd:function(){return c([].concat(Object(S.a)(r),[e]))},onRemove:function(){return c(r.filter((function(t){return t!==e})))}}),Object(me.jsx)(ve,{href:{pathname:"/auth/groups/:groupId",params:{groupId:e.id}},children:e.id}),Object(me.jsx)(qe,{dateValue:e.creation_date})]}}),Object(me.jsx)(Je,{nextPage:C,after:v,onPaginate:function(e){return f.push({pathname:"/auth/groups",query:{after:e}})}})]})},Jr=function(){return Object(me.jsx)(Cr,{activeTab:"groups",children:Object(me.jsx)(Yr,{})})},Wr=function(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{path:"/auth/groups/:groupId",children:Object(me.jsx)(Kr,{})}),Object(me.jsx)(o.b,{path:"/auth/groups",children:Object(me.jsx)(Jr,{})})]})},$r=function(e){var t,r=e.userId,c=e.after,a=e.onPaginate,s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)(!1),l=Object(d.a)(j,2),b=l[0],h=l[1],x=Object(n.useState)(null),O=Object(d.a)(x,2),p=O[0],f=O[1],v=he((function(){return ie.listUserGroups(r,c)}),[r,c,o]),g=v.results,y=v.loading,k=v.error,w=v.nextPage;return t=y?Object(me.jsx)(Ae,{}):k?Object(me.jsx)(De,{error:k}):Object(me.jsxs)(me.Fragment,{children:[p&&Object(me.jsx)(De,{error:p}),Object(me.jsx)(Ve,{keyFn:function(e){return e.id},rowFn:function(e){return[Object(me.jsx)(ve,{href:{pathname:"/auth/groups/:groupId",params:{groupId:e.id}},children:e.id}),Object(me.jsx)(qe,{dateValue:e.creation_date})]},headers:["Group ID","Created At"],actions:[{key:"Remove",buttonFn:function(e){return Object(me.jsx)(ht,{size:"sm",variant:"outline-danger",msg:Object(me.jsxs)("span",{children:["Are you sure you'd like to remove user ",Object(me.jsx)("strong",{children:r})," from group ",Object(me.jsx)("strong",{children:e.id}),"?"]}),onConfirm:function(){ie.removeUserFromGroup(r,e.id).catch((function(e){return alert(e)})).then((function(){u(!o)}))},children:"Remove"})}}],results:g,emptyState:"No groups found"}),Object(me.jsx)(Je,{onPaginate:a,after:c,nextPage:w}),b&&Object(me.jsx)(_r,{show:b,emptyState:"No groups found",filterPlaceholder:"Find Group...",modalTitle:"Add to Groups",addText:"Add to Groups",searchFn:function(e){return ie.listGroups(e,"",5).then((function(e){return e.results}))},onHide:function(){return h(!1)},onAttach:function(e){Promise.all(e.map((function(e){return ie.addUserToGroup(r,e)}))).then((function(){u(!o),f(null)})).catch((function(e){f(e)})).finally((function(){h(!1)}))}})]}),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Dr,{userId:r,page:"groups"}),Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(m.a,{variant:"success",onClick:function(){return h(!0)},children:"Add User to Group"})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return u(!o)}})})]}),Object(me.jsx)("div",{className:"mt-2",children:t})]})},Qr=function(){var e=de(),t=e.query.after,r=e.params.userId;return r?Object(me.jsx)($r,{userId:r,after:t||"",onPaginate:function(t){return e.push({pathname:"/auth/users/:userId/groups",params:{userId:r},query:{after:t}})}}):Object(me.jsx)(me.Fragment,{})},Xr=function(){return Object(me.jsx)(Cr,{activeTab:"users",children:Object(me.jsx)(Qr,{})})},Zr=function(e){var t=e.userId,r=e.after,c=e.onPaginate,a=pe().user,s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)(null),l=Object(d.a)(j,2),b=l[0],h=l[1],x=Object(n.useState)(null),O=Object(d.a)(x,2),p=O[0],f=O[1],m=Object(me.jsxs)(me.Fragment,{children:[b&&Object(me.jsx)(De,{error:b}),Object(me.jsx)(Ir,{userId:t,currentAccessKey:a?a.accessKeyId:"",refresh:o,after:r,onPaginate:c})]});return Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Dr,{userId:t,page:"credentials"}),Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(ht,{variant:"success",modalVariant:"success",msg:Object(me.jsxs)("span",{children:["Create a new Access Key for user ",Object(me.jsx)("strong",{children:t}),"?"]}),onConfirm:function(e){ie.createCredentials(t).catch((function(e){h(e)})).then((function(e){return h(null),u(!o),e})).then((function(e){f(e)})).finally(e)},children:"Create Access Key"})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return u(!o)}})})]}),Object(me.jsxs)("div",{className:"mt-2",children:[Object(me.jsx)(Sr,{credentials:p,show:!!p,onHide:function(){f(null)}}),m]})]})},en=function(){var e=de(),t=e.query.after,r=e.params.userId;return r?Object(me.jsx)(Zr,{userId:r,after:t||"",onPaginate:function(t){return e.push({pathname:"/auth/users/:userId/credentials",query:{after:t},params:{userId:r}})}}):Object(me.jsx)(me.Fragment,{})},tn=function(){return Object(me.jsx)(Cr,{activeTab:"users",children:Object(me.jsx)(en,{})})},rn=function(e){var t,r=e.userId,c=e.after,a=e.onPaginate,s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],j=he((function(){return ie.listUserPolicies(r,!0,c)}),[r,c,o]),l=j.results,b=j.loading,h=j.error,x=j.nextPage;return t=b?Object(me.jsx)(Ae,{}):h?Object(me.jsx)(De,{error:h}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Ve,{keyFn:function(e){return e.id},rowFn:function(e){return[Object(me.jsx)(ve,{href:{pathname:"/auth/policies/:policyId",params:{policyId:e.id}},children:e.id}),Object(me.jsx)(qe,{dateValue:e.creation_date})]},headers:["Policy ID","Created At"],results:l,emptyState:"No policies found"}),Object(me.jsx)(Je,{onPaginate:a,after:c,nextPage:x})]}),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Dr,{userId:r,page:"effectivePolicies"}),Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)("p",{children:Object(me.jsx)("small",{children:Object(me.jsx)("strong",{children:"All policies attached to this user, through direct attachment or via group memberships"})})})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return u(!o)}})})]}),Object(me.jsx)("div",{className:"mt-2",children:t})]})},nn=function(){var e=de(),t=e.query.after,r=e.params.userId;return r?Object(me.jsx)(rn,{userId:r,after:t||"",onPaginate:function(t){return e.push({pathname:"/auth/users/:userId/policies/effective",params:{userId:r},query:{after:t}})}}):Object(me.jsx)(me.Fragment,{})},cn=function(){return Object(me.jsx)(Cr,{activeTab:"users",children:Object(me.jsx)(nn,{})})},an=function(e){var t,r=e.userId,c=e.after,a=e.onPaginate,s=Object(n.useState)(!1),i=Object(d.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)(!1),l=Object(d.a)(j,2),b=l[0],h=l[1],x=Object(n.useState)(null),O=Object(d.a)(x,2),p=O[0],f=O[1],v=he((function(){return ie.listUserPolicies(r,!1,c)}),[r,c,o]),g=v.results,y=v.loading,k=v.error,w=v.nextPage;return t=y?Object(me.jsx)(Ae,{}):k?Object(me.jsx)(De,{error:k}):Object(me.jsxs)(me.Fragment,{children:[p&&Object(me.jsx)(De,{error:p}),Object(me.jsx)(Ve,{keyFn:function(e){return e.id},rowFn:function(e){return[Object(me.jsx)(ve,{href:{pathname:"/auth/policies/:policyId",params:{policyId:e.id}},children:e.id}),Object(me.jsx)(qe,{dateValue:e.creation_date})]},headers:["Policy ID","Created At"],actions:[{key:"Detach",buttonFn:function(e){return Object(me.jsx)(ht,{size:"sm",variant:"outline-danger",modalVariant:"danger",msg:Object(me.jsxs)("span",{children:["Are you sure you'd like to detach policy ",Object(me.jsx)("strong",{children:e.id}),"?"]}),onConfirm:function(){ie.detachPolicyFromUser(r,e.id).catch((function(e){return alert(e)})).then((function(){u(!o)}))},children:"Detach"})}}],results:g,emptyState:"No policies found"}),Object(me.jsx)(Je,{onPaginate:a,after:c,nextPage:w}),b&&Object(me.jsx)(_r,{show:b,emptyState:"No policies found",filterPlaceholder:"Find Policy...",modalTitle:"Attach Policies",addText:"Attach Policies",searchFn:function(e){return ie.listPolicies(e,"",5).then((function(e){return e.results}))},onHide:function(){return h(!1)},onAttach:function(e){Promise.all(e.map((function(e){return ie.attachPolicyToUser(r,e)}))).then((function(){u(!o),f(null)})).catch((function(e){f(e)})).finally((function(){h(!1)}))}})]}),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Dr,{userId:r,page:"policies"}),Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsx)(m.a,{variant:"success",onClick:function(){return h(!0)},children:"Attach Policy"})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return u(!o)}})})]}),Object(me.jsx)("div",{className:"mt-2",children:t})]})},sn=function(){var e=de(),t=e.query.after,r=e.params.userId;return r?Object(me.jsx)(an,{userId:r,after:t||"",onPaginate:function(t){return e.push({pathname:"/auth/users/:userId/policies",params:{userId:r},query:{after:t}})}}):Object(me.jsx)(me.Fragment,{})},on=function(){return Object(me.jsx)(Cr,{activeTab:"users",children:Object(me.jsx)(sn,{})})},un=function(e){var t=e.subPath,r=de().params.userId;return Object(me.jsx)(o.a,{to:"/auth/users/".concat(r).concat(t)})};function jn(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/auth/users/:userId",children:Object(me.jsx)(un,{subPath:"/groups"})}),Object(me.jsx)(o.b,{exact:!0,path:"/auth/users/:userId/groups",children:Object(me.jsx)(Xr,{})}),Object(me.jsx)(o.b,{exact:!0,path:"/auth/users/:userId/policies",children:Object(me.jsx)(on,{})}),Object(me.jsx)(o.b,{exact:!0,path:"/auth/users/:userId/policies/effective",children:Object(me.jsx)(cn,{})}),Object(me.jsx)(o.b,{exact:!0,path:"/auth/users/:userId/credentials",children:Object(me.jsx)(tn,{})})]})}var ln=function(){var e=pe().user,t=Object(n.useState)([]),r=Object(d.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(null),i=Object(d.a)(s,2),o=i[0],u=i[1],j=Object(n.useState)(!1),l=Object(d.a)(j,2),b=l[0],h=l[1],x=Object(n.useState)(!1),O=Object(d.a)(x,2),p=O[0],f=O[1],v=de(),g=v.query.after?v.query.after:"",y=he((function(){return ie.listUsers(g)}),[g,p]),k=y.results,w=y.loading,C=y.error,I=y.nextPage;return Object(n.useEffect)((function(){a([])}),[p,g]),C?Object(me.jsx)(De,{error:C}):w?Object(me.jsx)(Ae,{}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(Ue,{children:[Object(me.jsxs)(He,{orientation:"left",children:[Object(me.jsx)(m.a,{variant:"success",onClick:function(){return h(!0)},children:"Create User"}),Object(me.jsx)(ht,{onConfirm:function(){ie.deleteUsers(c.map((function(e){return e.id}))).catch((function(e){return u(e)})).then((function(){a([]),f(!p)}))},disabled:0===c.length,variant:"danger",msg:"Are you sure you'd like to delete ".concat(c.length," users?"),children:"Delete Selected"})]}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return f(!p)}})})]}),!!o&&Object(me.jsx)(De,{error:o}),Object(me.jsx)(Er,{show:b,onHide:function(){return h(!1)},onCreate:function(e){return ie.createUser(e).then((function(){a([]),h(!1),f(!p)}))},title:"Create User",idPlaceholder:"Username (e.g. 'jane.doe')"}),Object(me.jsx)(Ve,{results:k,headers:["","User ID","Created At"],keyFn:function(e){return e.id},rowFn:function(t){return[Object(me.jsx)(Me,{disabled:!!e&&e.id===t.id,name:t.id,onAdd:function(){return a([].concat(Object(S.a)(c),[t]))},onRemove:function(){return a(c.filter((function(e){return e!==t})))}}),Object(me.jsx)(ve,{href:{pathname:"/auth/users/:userId",params:{userId:t.id}},children:t.id}),Object(me.jsx)(qe,{dateValue:t.creation_date})]}}),Object(me.jsx)(Je,{nextPage:I,after:g,onPaginate:function(e){return v.push({pathname:"/auth/users",query:{after:e}})}})]})},dn=function(){return Object(me.jsx)(Cr,{activeTab:"users",children:Object(me.jsx)(ln,{})})},bn=function(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{path:"/auth/users/:userId",children:Object(me.jsx)(jn,{})}),Object(me.jsx)(o.b,{path:"/auth/users",children:Object(me.jsx)(dn,{})})]})},hn=function(e){var t=e.show,r=e.onHide,c=e.onSubmit,a=e.policy,s=void 0===a?null:a,i=Object(n.useState)(null),o=Object(d.a)(i,2),u=o[0],j=o[1],l=Object(n.useRef)(null),h=Object(n.useRef)(null);Object(n.useEffect)((function(){null===s&&l.current&&""===l.current.value&&l.current.focus()}));var x=Object(n.useState)(""),O=Object(d.a)(x,2),p=O[0],f=O[1];Object(n.useEffect)((function(){null!==s&&f(JSON.stringify({statement:s.statement},null,4))}),[s]);var g=function(){var e=h.current.value;try{JSON.parse(e)}catch(u){return j(u),!1}return(null===s?c(l.current.value,e):c(e)).catch((function(e){return j(e)}))},y=function(){j(null),r()};return Object(me.jsxs)(v.a,{show:t,onHide:y,children:[Object(me.jsx)(v.a.Header,{closeButton:!0,children:Object(me.jsxs)(v.a.Title,{children:[null===s?"Create":"Edit"," Policy"]})}),Object(me.jsxs)(v.a.Body,{children:[Object(me.jsxs)(b.a,{onSubmit:function(e){e.preventDefault(),g()},children:[null===s&&Object(me.jsx)(b.a.Group,{children:Object(me.jsx)(Fr.a,{ref:l,autoFocus:!0,placeholder:"Policy ID (e.g. 'MyRepoReadWrite')",type:"text"})}),Object(me.jsx)(b.a.Group,{children:Object(me.jsx)(Fr.a,{className:"policy-document",ref:h,placeholder:"Policy JSON Document",rows:15,as:"textarea",type:"text",onChange:function(e){return f(e.target.value)},value:p})})]}),!!u&&Object(me.jsx)(De,{className:"mt-3",error:u})]}),Object(me.jsxs)(v.a.Footer,{children:[Object(me.jsx)(m.a,{onClick:g,variant:"success",children:null===s?"Create":"Edit"}),Object(me.jsx)(m.a,{onClick:y,variant:"secondary",children:"Cancel"})]})]})},xn=function(e){var t,r=e.policy;return t=e.asJSON?Object(me.jsx)("pre",{className:"policy-body",children:JSON.stringify({statement:r.statement},null,4)}):Object(me.jsxs)(Ne.a,{children:[Object(me.jsx)("thead",{children:Object(me.jsxs)("tr",{children:[Object(me.jsx)("th",{children:"Actions"}),Object(me.jsx)("th",{children:"Resource"}),Object(me.jsx)("th",{children:"Effect"})]})}),Object(me.jsx)("tbody",{children:r.statement.map((function(e,t){return Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:Object(me.jsx)("code",{children:e.action.join(", ")})}),Object(me.jsx)("td",{children:Object(me.jsx)("code",{children:e.resource})}),Object(me.jsx)("td",{children:Object(me.jsx)("strong",{style:{color:"allow"===e.effect?"green":"red"},children:e.effect})})]},"statement-".concat(t))}))})]}),Object(me.jsxs)("div",{children:[Object(me.jsxs)("p",{children:[Object(me.jsx)("strong",{children:"Created At: "}),Object(me.jsx)(qe,{dateValue:r.creation_date})]}),t]})},On=function(e){var t,r=e.policyId,c=Object(n.useState)(!1),a=Object(d.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(!1),u=Object(d.a)(o,2),j=u[0],l=u[1],h=Object(n.useState)(!1),x=Object(d.a)(h,2),O=x[0],p=x[1],f=Oe((function(){return ie.getPolicy(r)}),[r,O]),v=f.response,y=f.loading,k=f.error,w=v;return t=y?Object(me.jsx)(Ae,{}):k?Object(me.jsx)(De,{error:k}):Object(me.jsx)(xn,{policy:w,asJSON:s}),Object(me.jsxs)(me.Fragment,{children:[Object(me.jsx)(Hr,{policyId:r}),Object(me.jsxs)(Ue,{children:[Object(me.jsx)(He,{orientation:"left",children:Object(me.jsxs)(m.a,{variant:"primary",onClick:function(){return l(!0)},children:[Object(me.jsx)(g.z,{})," Edit"]})}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(b.a,{children:Object(me.jsx)(b.a.Switch,{label:"JSON View",id:"policy-json-switch",onChange:function(e){return i(e.target.checked)}})})})]}),Object(me.jsx)("div",{className:"mt-2",children:t}),Object(me.jsx)(hn,{policy:w,show:j,onSubmit:function(e){return ie.editPolicy(r,e).then((function(){l(!1),p(!O)}))},onHide:function(){l(!1)}})]})},pn=function(){var e=de().params.policyId;return e?Object(me.jsx)(On,{policyId:e}):Object(me.jsx)(me.Fragment,{})},fn=function(){return Object(me.jsx)(Cr,{activeTab:"policies",children:Object(me.jsx)(pn,{})})},mn=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(null),s=Object(d.a)(a,2),i=s[0],o=s[1],u=Object(n.useState)(!1),j=Object(d.a)(u,2),l=j[0],b=j[1],h=Object(n.useState)(!1),x=Object(d.a)(h,2),O=x[0],p=x[1],f=de(),v=f.query.after?f.query.after:"",g=he((function(){return ie.listPolicies("",v)}),[v,O]),y=g.results,k=g.loading,w=g.error,C=g.nextPage;return Object(n.useEffect)((function(){c([])}),[v,O]),w?Object(me.jsx)(De,{error:w}):k?Object(me.jsx)(Ae,{}):Object(me.jsxs)(me.Fragment,{children:[Object(me.jsxs)(Ue,{children:[Object(me.jsxs)(He,{orientation:"left",children:[Object(me.jsx)(m.a,{variant:"success",onClick:function(){return b(!0)},children:"Create Policy"}),Object(me.jsx)(ht,{onConfirm:function(){ie.deletePolicies(r.map((function(e){return e.id}))).catch((function(e){return o(e)})).then((function(){c([]),p(!O)}))},disabled:0===r.length,variant:"danger",msg:"Are you sure you'd like to delete ".concat(r.length," policies?"),children:"Delete Selected"})]}),Object(me.jsx)(He,{orientation:"right",children:Object(me.jsx)(Le,{onClick:function(){return p(!O)}})})]}),!!i&&Object(me.jsx)(De,{error:i}),Object(me.jsx)(hn,{onSubmit:function(e,t){return ie.createPolicy(e,t).then((function(){c([]),b(!1),p(!O)}))},onHide:function(){return b(!1)},show:l}),Object(me.jsx)(Ve,{results:y,headers:["","Policy ID","Created At"],keyFn:function(e){return e.id},rowFn:function(e){return[Object(me.jsx)(Me,{name:e.id,onAdd:function(){return c([].concat(Object(S.a)(r),[e]))},onRemove:function(){return c(r.filter((function(t){return t!==e})))}}),Object(me.jsx)(ve,{href:{pathname:"/auth/policies/:policyId",params:{policyId:e.id}},children:e.id}),Object(me.jsx)(qe,{dateValue:e.creation_date})]}}),Object(me.jsx)(Je,{nextPage:C,after:v,onPaginate:function(e){return f.push({pathname:"/auth/policies",query:{after:e}})}})]})},vn=function(){return Object(me.jsx)(Cr,{activeTab:"policies",children:Object(me.jsx)(mn,{})})},gn=function(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/auth/policies",children:Object(me.jsx)(vn,{})}),Object(me.jsx)(o.b,{path:"/auth/policies/:policyId",children:Object(me.jsx)(fn,{})})]})},yn=function(){var e=de(),t=Object(n.useState)(null),r=Object(d.a)(t,2),c=r[0],a=r[1],s=e.query.next;return Object(me.jsx)(h.a,{children:Object(me.jsx)(x.a,{md:{offset:4,span:4},children:Object(me.jsxs)(O.a,{className:"login-widget",children:[Object(me.jsx)(O.a.Header,{children:"Login"}),Object(me.jsx)(O.a.Body,{children:Object(me.jsxs)(b.a,{onSubmit:function(t){t.preventDefault(),ie.login(t.target.username.value,t.target.password.value).then((function(t){return a(null),e.push(s||"/")})).catch((function(e){a(e)}))},children:[Object(me.jsxs)(b.a.Group,{controlId:"username",children:[Object(me.jsx)(b.a.Control,{type:"text",placeholder:"Access Key ID",autoFocus:!0}),Object(me.jsx)(b.a.Text,{className:"text-muted",children:Object(me.jsxs)("em",{children:["Running lakeFS for the first time? setup initial credentials by running ",Object(me.jsx)("code",{children:"lakefs init"})]})})]}),Object(me.jsx)(b.a.Group,{controlId:"password",children:Object(me.jsx)(b.a.Control,{type:"password",placeholder:"Secret Access Key"})}),!!c&&Object(me.jsx)(De,{error:c}),Object(me.jsx)(m.a,{variant:"primary",type:"submit",children:"Login"})]})})]})})})},kn=function(){return Object(me.jsx)(Ce,{children:Object(me.jsx)(yn,{})})},wn=function(){return Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/auth",children:Object(me.jsx)(o.a,{to:"/auth/credentials"})}),Object(me.jsx)(o.b,{path:"/auth/login",children:Object(me.jsx)(kn,{})}),Object(me.jsx)(o.b,{path:"/auth/credentials",children:Object(me.jsx)(Nr,{})}),Object(me.jsx)(o.b,{path:"/auth/users",children:Object(me.jsx)(bn,{})}),Object(me.jsx)(o.b,{path:"/auth/groups",children:Object(me.jsx)(Wr,{})}),Object(me.jsx)(o.b,{path:"/auth/policies",children:Object(me.jsx)(gn,{})})]})},Cn=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(null),r=Object(d.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(null),i=Object(d.a)(s,2),o=i[0],u=i[1],p=Object(n.useState)(!1),f=Object(d.a)(p,2),v=f[0],y=f[1],k=function(){var t=Object(l.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(!0),t.prev=1,t.next=4,se.lakeFS(e.current.value);case 4:r=t.sent,a(null),u(r),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),a(t.t0),u(null);case 13:return t.prev=13,y(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,9,13,16]])})));return function(){return t.apply(this,arguments)}}();if(o&&o.access_key_id){var w="data:application/octet-stream,"+encodeURIComponent("# lakectl command line configuration - save under the filename $HOME/.lakectl.yaml\ncredentials:\n  access_key_id: ".concat(o.access_key_id,"\n  secret_access_key: ").concat(o.secret_access_key,"\nserver:\n  endpoint_url: ").concat(window.location.protocol,"//").concat(window.location.host).concat(A,"\n"));return Object(me.jsx)(h.a,{children:Object(me.jsx)(x.a,{md:{offset:2,span:8},children:Object(me.jsxs)(O.a,{className:"setup-widget",children:[Object(me.jsx)(O.a.Header,{children:"Congratulations"}),Object(me.jsxs)(O.a.Body,{children:[Object(me.jsxs)(O.a.Text,{children:["Database was initialized and admin user was created.",Object(me.jsx)("br",{}),"Here are your credentials:",Object(me.jsx)("br",{})]}),Object(me.jsx)("hr",{}),Object(me.jsx)(Ne.a,{borderless:!0,hover:!0,children:Object(me.jsxs)("tbody",{children:[Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:"Key ID"}),Object(me.jsxs)("td",{children:[Object(me.jsx)("code",{children:o.access_key_id})," ",Object(me.jsx)(ze,{variant:"link",text:o.access_key_id,tooltip:"Copy key ID"})]})]}),Object(me.jsxs)("tr",{children:[Object(me.jsx)("td",{children:"Secret Key"}),Object(me.jsxs)("td",{children:[Object(me.jsx)("code",{children:o.secret_access_key})," ",Object(me.jsx)(ze,{variant:"link",text:o.secret_access_key,tooltip:"Copy secret key"})]})]})]})}),Object(me.jsxs)(O.a.Text,{children:["Download the initial client configuration under your ",Object(me.jsx)("code",{children:"$HOME/.lakectl.yaml"})," and keep a copy of the data for your login into the system",Object(me.jsx)("br",{})]}),Object(me.jsxs)(Ie.a,{variant:"warning",children:["This is the ",Object(me.jsx)("strong",{children:"only"})," time that the secret access keys can be viewed or downloaded. You cannot recover them later."]}),Object(me.jsx)("hr",{}),Object(me.jsxs)(m.a,{variant:"success",href:w,taget:"_blank",download:"lakectl.yaml",children:[Object(me.jsx)(g.l,{}),"Download Configuration "]})," ",Object(me.jsx)(m.a,{variant:"link",href:"/",children:"Go To Login"})]})]})})})}return Object(me.jsx)(h.a,{children:Object(me.jsx)(x.a,{md:{offset:2,span:8},children:Object(me.jsxs)(O.a,{className:"setup-widget",children:[Object(me.jsx)(O.a.Header,{children:"Initial Setup"}),Object(me.jsxs)(O.a.Body,{children:[Object(me.jsxs)(O.a.Text,{children:["This process will initialize the database schema and a first admin user to access the system.",Object(me.jsx)("br",{}),"Enter an admin username."]}),Object(me.jsxs)(b.a,{onSubmit:function(e){k(),e.preventDefault()},children:[Object(me.jsx)(b.a.Group,{controlId:"user-name",children:Object(me.jsx)(b.a.Control,{type:"text",placeholder:"Username",ref:e,autoFocus:!0})}),!!c&&Object(me.jsx)(De,{error:c}),Object(me.jsx)(m.a,{variant:"primary",disabled:v,type:"submit",children:"Setup"})]})]})]})})})};s.a.render(Object(me.jsx)(i.a,{children:Object(me.jsxs)(o.d,{children:[Object(me.jsx)(o.b,{exact:!0,path:"/",children:Object(me.jsx)(o.a,{to:"/repositories"})}),Object(me.jsx)(o.b,{path:"/repositories",children:Object(me.jsx)(wr,{})}),Object(me.jsx)(o.b,{path:"/auth",children:Object(me.jsx)(wn,{})}),Object(me.jsx)(o.b,{path:"/setup",children:Object(me.jsx)(Cn,{})})]})}),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.a84c2922.chunk.js.map